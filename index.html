<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Samia â€” Deen & Arabe ðŸŒ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital,wght@0,500;0,700;1,500&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --cream: #FDF8F3;
            --blush: #F9EEE8;
            --rose: #E8A4A4;
            --rose-dark: #C47A7A;
            --mauve: #B39DDB;
            --mauve-light: #EDE7F6;
            --sand: #D4B896;
            --text: #3D2B2B;
            --text-soft: #7A5C5C;
            --text-muted: #B08080;
            --card-bg: #FFFFFF;
            --border: #F0E0D6;
        }
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--cream);
            background-image:
                radial-gradient(ellipse 80% 50% at 20% 0%, rgba(232,164,164,0.15) 0%, transparent 60%),
                radial-gradient(ellipse 60% 40% at 80% 100%, rgba(179,157,219,0.12) 0%, transparent 60%);
            color: var(--text);
            min-height: 100vh;
            overscroll-behavior-y: contain;
        }
        .amiri { font-family: 'Amiri', serif; }
        .playfair { font-family: 'Playfair Display', serif; }
        .card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 20px;
            box-shadow: 0 2px 12px rgba(196,122,122,0.06);
        }
        .card-soft {
            background: var(--blush);
            border: 1px solid var(--border);
            border-radius: 20px;
        }
        .rose-btn {
            background: linear-gradient(135deg, #E8A4A4, #C47A7A);
            color: white;
            border-radius: 16px;
            font-weight: 700;
            box-shadow: 0 4px 16px rgba(196,122,122,0.3);
        }
        .mauve-btn {
            background: linear-gradient(135deg, #C5B3E8, #9C7FD4);
            color: white;
            border-radius: 16px;
            font-weight: 700;
            box-shadow: 0 4px 16px rgba(156,127,212,0.25);
        }
        .pb-nav { padding-bottom: 7rem; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        input, textarea { font-size: 16px !important; }
        details summary::-webkit-details-marker { display: none; }

        .active-nav .nav-icon { color: #C47A7A; }
        .active-nav .nav-label { color: #C47A7A; }

        /* Toast */
        .toast-anim { animation: toastIn 0.3s ease; }
        @keyframes toastIn { from { opacity:0; transform: translate(-50%,-10px); } to { opacity:1; transform: translate(-50%,0); } }

        /* Fade */
        @keyframes fadeUp { from { opacity:0; transform:translateY(16px); } to { opacity:1; transform:translateY(0); } }
        .fade-up { animation: fadeUp 0.4s ease both; }

        /* Rating buttons */
        .rating-btn { transition: all 0.15s ease; border: 1.5px solid var(--border); }
        #rate-easy.sel { background: #DCFCE7; border-color: #86EFAC; }
        #rate-medium.sel { background: #FEF9C3; border-color: #FDE047; }
        #rate-hard.sel { background: #FEE2E2; border-color: #FCA5A5; }

        /* Pill nav */
        .pill-btn {
            flex-shrink: 0;
            padding: 8px 16px;
            border-radius: 999px;
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            transition: all 0.2s;
        }
        .pill-active { background: linear-gradient(135deg, #E8A4A4, #C47A7A); color: white; box-shadow: 0 3px 10px rgba(196,122,122,0.3); }
        .pill-inactive { background: white; color: var(--text-muted); border: 1px solid var(--border); }

        /* Letter grid button */
        .letter-btn {
            background: white;
            border: 1.5px solid var(--border);
            border-radius: 14px;
            padding: 14px 8px;
            text-align: center;
            transition: all 0.15s;
            cursor: pointer;
        }
        .letter-btn:active { transform: scale(0.95); }
        .letter-btn.active-letter {
            background: linear-gradient(135deg, #F9EEE8, #F0D8D8);
            border-color: #E8A4A4;
        }

        /* Prophet detail anim */
        #prophet-detail { animation: fadeUp 0.3s ease; }
    </style>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCBZ96lSFIWzPsHklwk3ZU8kfWudfp8oVQ",
            authDomain: "samcy-1136c.firebaseapp.com",
            projectId: "samcy-1136c",
            storageBucket: "samcy-1136c.firebasestorage.app",
            messagingSenderId: "337821844780",
            appId: "1:337821844780:web:fb15b7fba7b1298d5a5889"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const APP_ID = 'samia-deen-app-v1';
        const USER_ID = 'samia';

        // ============ DATA ============
        let userData = {};
        let sessions = [];
        let scores = {};
        let personalDuas = [];

        async function loadAll() {
            try {
                const mainSnap = await getDoc(doc(db, 'artifacts', APP_ID, 'users', USER_ID, 'data', 'main'));
                if (mainSnap.exists()) {
                    const d = mainSnap.data();
                    sessions = d.sessions || [];
                    scores = d.scores || {};
                    userData = { streak: d.streak||0, lastSession: d.lastSession||null };
                }
                const duasSnap = await getDoc(doc(db, 'artifacts', APP_ID, 'users', USER_ID, 'data', 'duas'));
                if (duasSnap.exists()) personalDuas = duasSnap.data().list || [];
            } catch(e) { console.error('load error', e); }
        }

        async function saveMain() {
            try {
                await setDoc(doc(db, 'artifacts', APP_ID, 'users', USER_ID, 'data', 'main'), {
                    sessions, scores, streak: userData.streak||0, lastSession: userData.lastSession||null
                });
            } catch(e) { console.error('save error', e); }
        }

        async function saveDuas() {
            try {
                await setDoc(doc(db, 'artifacts', APP_ID, 'users', USER_ID, 'data', 'duas'), { list: personalDuas });
            } catch(e) { console.error('save duas error', e); }
        }

        // ============ SURAHS DATA ============
        const SURAHS = [
            { id:'fatiha', name:'Al-Fatiha', nameAr:'Ø§Ù„ÙØ§ØªØ­Ø©', level:1, emoji:'ðŸŒŸ', tip:'La plus rÃ©citÃ©e dans la priÃ¨re. Chaque lettre doit Ãªtre claire.',
              verses:[
                {n:1,ar:'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù',tr:'Au nom d'Allah, le Tout MisÃ©ricordieux, le TrÃ¨s MisÃ©ricordieux'},
                {n:2,ar:'Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙŽÙ‘Ù‡Ù Ø±ÙŽØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙŽØ§Ù„ÙŽÙ…ÙÙŠÙ†ÙŽ',tr:'Louange Ã  Allah, Seigneur des mondes'},
                {n:3,ar:'Ø§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù',tr:'Le Tout MisÃ©ricordieux, le TrÃ¨s MisÃ©ricordieux'},
                {n:4,ar:'Ù…ÙŽØ§Ù„ÙÙƒÙ ÙŠÙŽÙˆÙ’Ù…Ù Ø§Ù„Ø¯ÙÙ‘ÙŠÙ†Ù',tr:'MaÃ®tre du Jour de la rÃ©tribution'},
                {n:5,ar:'Ø¥ÙÙŠÙŽÙ‘Ø§ÙƒÙŽ Ù†ÙŽØ¹Ù’Ø¨ÙØ¯Ù ÙˆÙŽØ¥ÙÙŠÙŽÙ‘Ø§ÙƒÙŽ Ù†ÙŽØ³Ù’ØªÙŽØ¹ÙÙŠÙ†Ù',tr:'C'est Toi que nous adorons, et c'est Toi dont nous implorons le secours'},
                {n:6,ar:'Ø§Ù‡Ù’Ø¯ÙÙ†ÙŽØ§ Ø§Ù„ØµÙÙ‘Ø±ÙŽØ§Ø·ÙŽ Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙŽÙ‚ÙÙŠÙ…ÙŽ',tr:'Guide-nous dans le droit chemin'},
                {n:7,ar:'ØµÙØ±ÙŽØ§Ø·ÙŽ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ø£ÙŽÙ†Ù’Ø¹ÙŽÙ…Ù’ØªÙŽ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ØºÙŽÙŠÙ’Ø±Ù Ø§Ù„Ù’Ù…ÙŽØºÙ’Ø¶ÙÙˆØ¨Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ÙˆÙŽÙ„ÙŽØ§ Ø§Ù„Ø¶ÙŽÙ‘Ø§Ù„ÙÙ‘ÙŠÙ†ÙŽ',tr:'Le chemin de ceux que Tu as comblÃ©s de bienfaits, non pas de ceux qui ont encouru Ta colÃ¨re, ni des Ã©garÃ©s'},
              ]},
            { id:'ikhlas', name:'Al-Ikhlas', nameAr:'Ø§Ù„Ø¥Ø®Ù„Ø§Øµ', level:1, emoji:'ðŸ’Ž', tip:'Vaut 1/3 du Coran. Chaque mot compte.',
              verses:[
                {n:1,ar:'Ù‚ÙÙ„Ù’ Ù‡ÙÙˆÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø£ÙŽØ­ÙŽØ¯ÙŒ',tr:'Dis : Â«Il est Allah, l'UniqueÂ»'},
                {n:2,ar:'Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø§Ù„ØµÙŽÙ‘Ù…ÙŽØ¯Ù',tr:'Allah, le Seul Ã  Ãªtre implorÃ© pour ce que nous dÃ©sirons'},
                {n:3,ar:'Ù„ÙŽÙ…Ù’ ÙŠÙŽÙ„ÙØ¯Ù’ ÙˆÙŽÙ„ÙŽÙ…Ù’ ÙŠÙÙˆÙ„ÙŽØ¯Ù’',tr:'Il n'a pas engendrÃ©, n'a pas Ã©tÃ© engendrÃ© non plus'},
                {n:4,ar:'ÙˆÙŽÙ„ÙŽÙ…Ù’ ÙŠÙŽÙƒÙÙ† Ù„ÙŽÙ‘Ù‡Ù ÙƒÙÙÙÙˆÙ‹Ø§ Ø£ÙŽØ­ÙŽØ¯ÙŒ',tr:'Et nul n'est Ã©gal Ã  Lui'},
              ]},
            { id:'falaq', name:'Al-Falaq', nameAr:'Ø§Ù„ÙÙ„Ù‚', level:1, emoji:'ðŸŒ…', tip:'Sourate de protection. Ã€ lire avec clartÃ©.',
              verses:[
                {n:1,ar:'Ù‚ÙÙ„Ù’ Ø£ÙŽØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙŽØ¨ÙÙ‘ Ø§Ù„Ù’ÙÙŽÙ„ÙŽÙ‚Ù',tr:'Dis : Â«Je cherche protection auprÃ¨s du Seigneur de l'Aube naissanteÂ»'},
                {n:2,ar:'Ù…ÙÙ† Ø´ÙŽØ±ÙÙ‘ Ù…ÙŽØ§ Ø®ÙŽÙ„ÙŽÙ‚ÙŽ',tr:'contre le mal de ce qu'Il a crÃ©Ã©'},
                {n:3,ar:'ÙˆÙŽÙ…ÙÙ† Ø´ÙŽØ±ÙÙ‘ ØºÙŽØ§Ø³ÙÙ‚Ù Ø¥ÙØ°ÙŽØ§ ÙˆÙŽÙ‚ÙŽØ¨ÙŽ',tr:'et contre le mal de l'obscuritÃ© quand elle s'installe'},
                {n:4,ar:'ÙˆÙŽÙ…ÙÙ† Ø´ÙŽØ±ÙÙ‘ Ø§Ù„Ù†ÙŽÙ‘ÙÙŽÙ‘Ø§Ø«ÙŽØ§ØªÙ ÙÙÙŠ Ø§Ù„Ù’Ø¹ÙÙ‚ÙŽØ¯Ù',tr:'et contre le mal de celles qui soufflent sur les nÅ“uds'},
                {n:5,ar:'ÙˆÙŽÙ…ÙÙ† Ø´ÙŽØ±ÙÙ‘ Ø­ÙŽØ§Ø³ÙØ¯Ù Ø¥ÙØ°ÙŽØ§ Ø­ÙŽØ³ÙŽØ¯ÙŽ',tr:'et contre le mal de l'envieux quand il envie'},
              ]},
            { id:'nas', name:'An-Nas', nameAr:'Ø§Ù„Ù†Ø§Ø³', level:1, emoji:'ðŸ›¡ï¸', tip:'Ã€ rÃ©citer le soir pour la protection.',
              verses:[
                {n:1,ar:'Ù‚ÙÙ„Ù’ Ø£ÙŽØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙŽØ¨ÙÙ‘ Ø§Ù„Ù†ÙŽÙ‘Ø§Ø³Ù',tr:'Dis : Â«Je cherche protection auprÃ¨s du Seigneur des hommesÂ»'},
                {n:2,ar:'Ù…ÙŽÙ„ÙÙƒÙ Ø§Ù„Ù†ÙŽÙ‘Ø§Ø³Ù',tr:'du Roi des hommes'},
                {n:3,ar:'Ø¥ÙÙ„ÙŽÙ°Ù‡Ù Ø§Ù„Ù†ÙŽÙ‘Ø§Ø³Ù',tr:'de Dieu des hommes'},
                {n:4,ar:'Ù…ÙÙ† Ø´ÙŽØ±ÙÙ‘ Ø§Ù„Ù’ÙˆÙŽØ³Ù’ÙˆÙŽØ§Ø³Ù Ø§Ù„Ù’Ø®ÙŽÙ†ÙŽÙ‘Ø§Ø³Ù',tr:'contre le mal du mauvais conseiller furtif'},
                {n:5,ar:'Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙÙˆÙŽØ³Ù’ÙˆÙØ³Ù ÙÙÙŠ ØµÙØ¯ÙÙˆØ±Ù Ø§Ù„Ù†ÙŽÙ‘Ø§Ø³Ù',tr:'qui souffle le mal dans les poitrines des hommes'},
                {n:6,ar:'Ù…ÙÙ†ÙŽ Ø§Ù„Ù’Ø¬ÙÙ†ÙŽÙ‘Ø©Ù ÙˆÙŽØ§Ù„Ù†ÙŽÙ‘Ø§Ø³Ù',tr:'qu'il soit djinn ou Ãªtre humain'},
              ]},
            { id:'asr', name:'Al-Asr', nameAr:'Ø§Ù„Ø¹ØµØ±', level:1, emoji:'â³', tip:'Imam Ash-Shafi'i : si le Coran n'avait que cette sourate, elle suffirait.',
              verses:[
                {n:1,ar:'ÙˆÙŽØ§Ù„Ù’Ø¹ÙŽØµÙ’Ø±Ù',tr:'Par le Temps !'},
                {n:2,ar:'Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙŽØ§Ù†ÙŽ Ù„ÙŽÙÙÙŠ Ø®ÙØ³Ù’Ø±Ù',tr:'Certes, l'Ãªtre humain est en perdition'},
                {n:3,ar:'Ø¥ÙÙ„ÙŽÙ‘Ø§ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ø¢Ù…ÙŽÙ†ÙÙˆØ§ ÙˆÙŽØ¹ÙŽÙ…ÙÙ„ÙÙˆØ§ Ø§Ù„ØµÙŽÙ‘Ø§Ù„ÙØ­ÙŽØ§ØªÙ ÙˆÙŽØªÙŽÙˆÙŽØ§ØµÙŽÙˆÙ’Ø§ Ø¨ÙØ§Ù„Ù’Ø­ÙŽÙ‚ÙÙ‘ ÙˆÙŽØªÙŽÙˆÙŽØ§ØµÙŽÙˆÙ’Ø§ Ø¨ÙØ§Ù„ØµÙŽÙ‘Ø¨Ù’Ø±Ù',tr:'sauf ceux qui croient et accomplissent les bonnes Å“uvres, s'enjoignent mutuellement la vÃ©ritÃ© et l'endurance'},
              ]},
            { id:'kawthar', name:'Al-Kawthar', nameAr:'Ø§Ù„ÙƒÙˆØ«Ø±', level:1, emoji:'ðŸŒŠ', tip:'La plus courte sourate. Travaille l'emphase.',
              verses:[
                {n:1,ar:'Ø¥ÙÙ†ÙŽÙ‘Ø§ Ø£ÙŽØ¹Ù’Ø·ÙŽÙŠÙ’Ù†ÙŽØ§ÙƒÙŽ Ø§Ù„Ù’ÙƒÙŽÙˆÙ’Ø«ÙŽØ±ÙŽ',tr:'Nous t'avons certes donnÃ© l'abondance'},
                {n:2,ar:'ÙÙŽØµÙŽÙ„ÙÙ‘ Ù„ÙØ±ÙŽØ¨ÙÙ‘ÙƒÙŽ ÙˆÙŽØ§Ù†Ù’Ø­ÙŽØ±Ù’',tr:'Accomplis donc la priÃ¨re pour ton Seigneur et sacrifie'},
                {n:3,ar:'Ø¥ÙÙ†ÙŽÙ‘ Ø´ÙŽØ§Ù†ÙØ¦ÙŽÙƒÙŽ Ù‡ÙÙˆÙŽ Ø§Ù„Ù’Ø£ÙŽØ¨Ù’ØªÙŽØ±Ù',tr:'C'est bien ton ennemi qui sera sans postÃ©ritÃ©'},
              ]},
            { id:'feel', name:'Al-Fil', nameAr:'Ø§Ù„ÙÙŠÙ„', level:2, emoji:'ðŸ˜', tip:'Attention aux lettres prolongÃ©es et aux gunnah.',
              verses:[
                {n:1,ar:'Ø£ÙŽÙ„ÙŽÙ…Ù’ ØªÙŽØ±ÙŽ ÙƒÙŽÙŠÙ’ÙÙŽ ÙÙŽØ¹ÙŽÙ„ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙƒÙŽ Ø¨ÙØ£ÙŽØµÙ’Ø­ÙŽØ§Ø¨Ù Ø§Ù„Ù’ÙÙÙŠÙ„Ù',tr:'N'as-tu pas vu comment ton Seigneur a agi envers les gens de l'Ã©lÃ©phant?'},
                {n:2,ar:'Ø£ÙŽÙ„ÙŽÙ…Ù’ ÙŠÙŽØ¬Ù’Ø¹ÙŽÙ„Ù’ ÙƒÙŽÙŠÙ’Ø¯ÙŽÙ‡ÙÙ…Ù’ ÙÙÙŠ ØªÙŽØ¶Ù’Ù„ÙÙŠÙ„Ù',tr:'N'a-t-Il pas rendu vains leurs stratagÃ¨mes?'},
                {n:3,ar:'ÙˆÙŽØ£ÙŽØ±Ù’Ø³ÙŽÙ„ÙŽ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ Ø·ÙŽÙŠÙ’Ø±Ù‹Ø§ Ø£ÙŽØ¨ÙŽØ§Ø¨ÙÙŠÙ„ÙŽ',tr:'Il envoya contre eux des oiseaux par volÃ©es'},
                {n:4,ar:'ØªÙŽØ±Ù’Ù…ÙÙŠÙ‡ÙÙ… Ø¨ÙØ­ÙØ¬ÙŽØ§Ø±ÙŽØ©Ù Ù…ÙÙ‘Ù† Ø³ÙØ¬ÙÙ‘ÙŠÙ„Ù',tr:'qui lancÃ¨rent sur eux des pierres d'argile'},
                {n:5,ar:'ÙÙŽØ¬ÙŽØ¹ÙŽÙ„ÙŽÙ‡ÙÙ…Ù’ ÙƒÙŽØ¹ÙŽØµÙ’ÙÙ Ù…ÙŽÙ‘Ø£Ù’ÙƒÙÙˆÙ„Ù',tr:'et Il les rendit pareils Ã  une paille mÃ¢chÃ©e'},
              ]},
            { id:'zilzal', name:'Az-Zalzala', nameAr:'Ø§Ù„Ø²Ù„Ø²Ù„Ø©', level:2, emoji:'âš¡', tip:'EntraÃ®ne-toi Ã  lire sans t'arrÃªter.',
              verses:[
                {n:1,ar:'Ø¥ÙØ°ÙŽØ§ Ø²ÙÙ„Ù’Ø²ÙÙ„ÙŽØªÙ Ø§Ù„Ù’Ø£ÙŽØ±Ù’Ø¶Ù Ø²ÙÙ„Ù’Ø²ÙŽØ§Ù„ÙŽÙ‡ÙŽØ§',tr:'Quand la terre tremblera de son violent tremblement'},
                {n:2,ar:'ÙˆÙŽØ£ÙŽØ®Ù’Ø±ÙŽØ¬ÙŽØªÙ Ø§Ù„Ù’Ø£ÙŽØ±Ù’Ø¶Ù Ø£ÙŽØ«Ù’Ù‚ÙŽØ§Ù„ÙŽÙ‡ÙŽØ§',tr:'et que la terre sortira ses fardeaux'},
                {n:3,ar:'ÙˆÙŽÙ‚ÙŽØ§Ù„ÙŽ Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙŽØ§Ù†Ù Ù…ÙŽØ§ Ù„ÙŽÙ‡ÙŽØ§',tr:'et que l'Ãªtre humain dira : Â«Qu'a-t-elle?Â»'},
                {n:4,ar:'ÙŠÙŽÙˆÙ’Ù…ÙŽØ¦ÙØ°Ù ØªÙØ­ÙŽØ¯ÙÙ‘Ø«Ù Ø£ÙŽØ®Ù’Ø¨ÙŽØ§Ø±ÙŽÙ‡ÙŽØ§',tr:'Ce jour-lÃ , elle racontera ses nouvelles'},
                {n:5,ar:'Ø¨ÙØ£ÙŽÙ†ÙŽÙ‘ Ø±ÙŽØ¨ÙŽÙ‘ÙƒÙŽ Ø£ÙŽÙˆÙ’Ø­ÙŽÙ‰Ù° Ù„ÙŽÙ‡ÙŽØ§',tr:'parce que ton Seigneur lui en aura donnÃ© l'ordre'},
                {n:6,ar:'ÙŠÙŽÙˆÙ’Ù…ÙŽØ¦ÙØ°Ù ÙŠÙŽØµÙ’Ø¯ÙØ±Ù Ø§Ù„Ù†ÙŽÙ‘Ø§Ø³Ù Ø£ÙŽØ´Ù’ØªÙŽØ§ØªÙ‹Ø§ Ù„ÙÙ‘ÙŠÙØ±ÙŽÙˆÙ’Ø§ Ø£ÙŽØ¹Ù’Ù…ÙŽØ§Ù„ÙŽÙ‡ÙÙ…Ù’',tr:'Ce jour-lÃ , les gens sortiront en groupes dispersÃ©s pour qu'on leur montre leurs Å“uvres'},
                {n:7,ar:'ÙÙŽÙ…ÙŽÙ† ÙŠÙŽØ¹Ù’Ù…ÙŽÙ„Ù’ Ù…ÙØ«Ù’Ù‚ÙŽØ§Ù„ÙŽ Ø°ÙŽØ±ÙŽÙ‘Ø©Ù Ø®ÙŽÙŠÙ’Ø±Ù‹Ø§ ÙŠÙŽØ±ÙŽÙ‡Ù',tr:'Quiconque aura fait le poids d'un atome de bien le verra'},
                {n:8,ar:'ÙˆÙŽÙ…ÙŽÙ† ÙŠÙŽØ¹Ù’Ù…ÙŽÙ„Ù’ Ù…ÙØ«Ù’Ù‚ÙŽØ§Ù„ÙŽ Ø°ÙŽØ±ÙŽÙ‘Ø©Ù Ø´ÙŽØ±Ù‹Ù‘Ø§ ÙŠÙŽØ±ÙŽÙ‡Ù',tr:'et quiconque aura fait le poids d'un atome de mal le verra'},
              ]},
        ];

        // ============ PROPHETS ============
        const PROPHETS = [
            {name:"Adam ï·º",sub:"Le premier homme et prophÃ¨te",emoji:"ðŸŒ¿",story:`Adam est le premier Ãªtre humain et le premier prophÃ¨te. Allah l'a crÃ©Ã© de la terre, lui a insufflÃ© Son souffle et lui a enseignÃ© les noms de toutes choses.\n\nIl vivait au Paradis avec Ãˆve (Hawwa), mais le ShaytÃ¢n les a trompÃ©s. Allah leur a pardonnÃ© aprÃ¨s leur repentir sincÃ¨re, et les a envoyÃ©s sur terre comme Ses reprÃ©sentants.\n\nðŸ“¿ LeÃ§on : Allah pardonne toujours Ã  celui qui se repent sincÃ¨rement. Le repentir d'Adam est le modÃ¨le de l'istighfar.`},
            {name:"NÃ»h ï·º",sub:"950 ans de da'wa, le DÃ©luge",emoji:"ðŸš¢",story:`NÃ»h a prÃªchÃ© son peuple pendant 950 ans â€” une patience extraordinaire. Son peuple adorait des idoles et refusait obstinÃ©ment de l'Ã©couter.\n\nIl construisit l'Arche par ordre divin. Le Grand DÃ©luge tout submergea. MÃªme son fils refusa de monter, croyant qu'une montagne le protÃ©gerait.\n\nðŸ“¿ LeÃ§on : La guidance appartient Ã  Allah seul. MÃªme les prophÃ¨tes ne peuvent pas guider ceux qu'Allah n'a pas guidÃ©s.`},
            {name:"IbrÃ¢hÃ®m ï·º",sub:"KhalÃ®l Allah â€” L'ami intime d'Allah",emoji:"ðŸ”¥",story:`Ibrahim est appelÃ© "pÃ¨re des prophÃ¨tes". DÃ¨s l'enfance sa raison l'a conduit vers l'Unique. Il brisa les idoles de son peuple, fut jetÃ© dans un feu ardent, mais Allah ordonna au feu : "Sois fraÃ®cheur et paix"\n\nL'Ã©preuve suprÃªme : Allah lui ordonna de sacrifier son fils IsmaÃ¯l. Tous deux acceptÃ¨rent â€” Allah remplaÃ§a IsmaÃ¯l par un bÃ©lier. Avec IsmaÃ¯l, il bÃ¢tit la Ka'ba.\n\nðŸ“¿ LeÃ§on : La soumission totale Ã  Allah est illustrÃ©e par Ibrahim dans chaque Ã©tape de sa vie.`},
            {name:"YÃ»suf ï·º",sub:"La plus belle des histoires",emoji:"ðŸ’«",story:`YÃ»suf est fils de Ya'qÃ»b. Ses frÃ¨res jaloux le jetÃ¨rent dans un puits, puis le vendirent comme esclave en Ã‰gypte. La femme de son maÃ®tre l'accusa faussement â€” il fut emprisonnÃ©.\n\nQuand le roi d'Ã‰gypte fit un rÃªve troublant, YÃ»suf l'interprÃ©ta et fut nommÃ© ministre des finances. Ses frÃ¨res vinrent chercher du grain sans le reconnaÃ®tre. Il se rÃ©vÃ©la Ã  eux. Son pÃ¨re retrouva la vue.\n\nðŸ“¿ LeÃ§on : Patience, chastetÃ©, confiance en Allah â€” les pires Ã©preuves deviennent Ã©lÃ©vation.`},
            {name:"MÃ»sÃ¢ ï·º",sub:"KalÃ®m Allah â€” Ã€ qui Allah a parlÃ© directement",emoji:"âš¡",story:`MÃ»sÃ¢ est le prophÃ¨te le plus mentionnÃ© dans le Coran. Il grandit dans le palais de Pharaon lui-mÃªme. Sur le mont SinaÃ¯, Allah lui parla directement depuis un buisson ardent.\n\nAvec HÃ¢rÃ»n, il affronta Pharaon. Les 9 miracles s'enchaÃ®nent. Pharaon s'entÃªte. La mer se fend. Pharaon se noie au moment de dire "Je crois" â€” trop tard.\n\nðŸ“¿ LeÃ§on : La mission prophÃ©tique est difficile, mais Allah est avec Ses Ã©lus.`},
            {name:"DÃ¢wÃ»d ï·º",sub:"Roi, prophÃ¨te, psalmiste",emoji:"ðŸŽµ",story:`DÃ¢wÃ»d Ã©tait un jeune berger quand il tua le gÃ©ant JalÃ»t d'une seule fronde. Allah lui donna le royaume et la sagesse.\n\nIl reÃ§ut les ZabÃ»r (Psaumes). Sa voix Ã©tait si belle que les oiseaux et les montagnes participaient Ã  ses louanges. Allah lui apprit Ã  forger le fer.\n\nðŸ“¿ LeÃ§on : Combiner la foi, la compÃ©tence et la gratitude. DÃ¢wÃ»d Ã©tait roi mais restait profondÃ©ment humble devant Allah.`},
            {name:"SulaymÃ¢n ï·º",sub:"MaÃ®tre des djinns, des hommes et des animaux",emoji:"ðŸ‘‘",story:`SulaymÃ¢n comprenait le langage des animaux et commandait les djinns. Il reÃ§ut un message de la huppe sur une reine (BilqÃ®s de Saba) qui adorait le soleil. Il l'invita Ã  l'Islam â€” elle embrassa la foi.\n\nQuand il mourut appuyÃ© sur son bÃ¢ton, les djinns continuÃ¨rent Ã  travailler sans savoir qu'il Ã©tait mort.\n\nðŸ“¿ LeÃ§on : Le pouvoir et la richesse ne valent rien sans la reconnaissance d'Allah.`},
            {name:"YÃ»nus ï·º",sub:"L'homme de la baleine",emoji:"ðŸ‹",story:`YÃ»nus fut envoyÃ© Ã  la ville de Ninive. DÃ©couragÃ© par le refus de son peuple, il quitta sa mission sans autorisation divine. Il fut avalÃ© par un grand poisson.\n\nDans les tÃ©nÃ¨bres il invoqua : "Il n'y a de dieu que Toi, Gloire Ã  Toi, j'ai Ã©tÃ© parmi les injustes." â€” la dua YÃ»nus, l'une des plus puissantes. Allah l'exauÃ§a.\n\nðŸ“¿ LeÃ§on : MÃªme dans les pires moments, la dua sincÃ¨re dans les tÃ©nÃ¨bres nous sauve.`},
            {name:"Maryam ï·»",sub:"La meilleure des femmes â€” mÃ¨re d'Issa",emoji:"ðŸŒ¸",story:`Maryam est la seule femme citÃ©e par son nom dans le Coran, et une sourate entiÃ¨re lui est dÃ©diÃ©e. Elle consacra sa vie Ã  Allah dans le temple.\n\nZakariyyÃ¢ son gardien trouvait toujours une nourriture miraculeuse chez elle. L'ange JibrÃ®l lui annonÃ§a qu'elle aurait un enfant sans pÃ¨re â€” Issa. Elle l'enfanta seule sous un palmier.\n\nðŸ“¿ LeÃ§on : La puretÃ©, la dÃ©votion et la confiance absolue en Allah font de Maryam le modÃ¨le de la femme croyante.`},
            {name:"ÃŽsÃ¢ ï·º",sub:"RÃ»h Allah â€” nÃ© sans pÃ¨re",emoji:"âœ¨",story:`Issa est nÃ© miraculeusement de Maryam vierge. DÃ¨s le berceau, il parla pour dÃ©fendre sa mÃ¨re : "Je suis le serviteur d'Allah ; Il m'a donnÃ© le Livre et m'a fait prophÃ¨te."\n\nIl guÃ©rissait les malades, ressuscitait les morts, crÃ©ait des oiseaux d'argile qui s'envolaient â€” tout par la permission d'Allah. Il redescendra Ã  la fin des temps.\n\nðŸ“¿ LeÃ§on : Issa est un serviteur d'Allah, pas Dieu. Sa naissance miraculeuse n'est pas plus Ã©trange que celle d'Adam.`},
            {name:"Muhammad ï·º",sub:"Le sceau des prophÃ¨tes",emoji:"ðŸŒ™",story:`Muhammad ï·º est nÃ© Ã  La Mecque en 570, l'AnnÃ©e de l'Ã‰lÃ©phant. Orphelin tÃ´t, il fut connu sous le nom d'"Al-AmÃ®n" (le fidÃ¨le). Ã€ 40 ans, dans la grotte de HirÃ¢, l'ange JibrÃ®l lui dit "Lis !"\n\nLa mission dura 23 ans. En 630, La Mecque fut conquise sans effusion de sang. Le ProphÃ¨te ï·º pardonna Ã  ses pires ennemis.\n\nðŸ“¿ LeÃ§on : "Il y a dans l'EnvoyÃ© d'Allah un excellent modÃ¨le pour vous." (33:21) Ã‰tudier sa vie, c'est apprendre Ã  vivre.`},
        ];

        // ============ ALLAH 99 NAMES ============
        const ALLAH_NAMES = [
            {n:"AllÃ¢h",a:"Ø§Ù„Ù„Ù‡",t:"Le nom suprÃªme",d:"Le nom propre d'Allah, celui que rien ni personne ne peut porter. Contient tous les attributs divins."},
            {n:"Ar-RahmÃ¢n",a:"Ø§Ù„Ø±Ø­Ù…Ù†",t:"Le Tout-MisÃ©ricordieux",d:"Sa misÃ©ricorde englobe toute crÃ©ature. Il est doux mÃªme avec les ingrats."},
            {n:"Ar-RahÃ®m",a:"Ø§Ù„Ø±Ø­ÙŠÙ…",t:"Le TrÃ¨s-MisÃ©ricordieux",d:"Sa misÃ©ricorde spÃ©ciale est pour les croyants au Jour Dernier. Il ne dÃ©Ã§oit jamais celui qui revient vers Lui."},
            {n:"Al-Malik",a:"Ø§Ù„Ù…Ù„Ùƒ",t:"Le Roi souverain",d:"Tout le pouvoir Lui appartient. Aucun roi ne peut rivaliser avec Sa RoyautÃ© absolue."},
            {n:"Al-QuddÃ»s",a:"Ø§Ù„Ù‚Ø¯ÙˆØ³",t:"Le Saint",d:"Absolument pur de tout dÃ©faut. Quand tu te sens impur, reviens vers Lui qui est la PuretÃ© mÃªme."},
            {n:"As-SalÃ¢m",a:"Ø§Ù„Ø³Ù„Ø§Ù…",t:"La Paix",d:"Il est la source de toute paix. 'As-salÃ¢mu alaykum' rappelle qu'Allah est As-SalÃ¢m."},
            {n:"Al-Mu'min",a:"Ø§Ù„Ù…Ø¤Ù…Ù†",t:"Le Garant",d:"Il sÃ©curise Ses servants contre toute injustice."},
            {n:"Al-'AzÃ®z",a:"Ø§Ù„Ø¹Ø²ÙŠØ²",t:"Le Tout-Puissant",d:"Sa puissance est inÃ©galable. En Lui seul trouve-t-on la vraie force."},
            {n:"Al-JabbÃ¢r",a:"Ø§Ù„Ø¬Ø¨Ø§Ø±",t:"Le RÃ©parateur",d:"Il rÃ©pare les cÅ“urs brisÃ©s. Viens Ã  Lui avec tes fractures â€” Il est le seul Ã  pouvoir les souder."},
            {n:"Al-KhÃ¢liq",a:"Ø§Ù„Ø®Ø§Ù„Ù‚",t:"Le CrÃ©ateur",d:"Il crÃ©e de rien. Chaque fois que tu observes la nature, tu vois Son Å“uvre."},
            {n:"Al-GhaffÃ¢r",a:"Ø§Ù„ØºÙØ§Ø±",t:"Le Grand Pardonneur",d:"Il pardonne encore et encore, sans limite. Ne dÃ©sespÃ¨re jamais de Sa misÃ©ricorde."},
            {n:"Al-WahhÃ¢b",a:"Ø§Ù„ÙˆÙ‡Ø§Ø¨",t:"Le Tout-Donateur",d:"Il donne sans qu'on Lui demande, sans condition. Chaque respiration est un cadeau."},
            {n:"Ar-RazzÃ¢q",a:"Ø§Ù„Ø±Ø²Ø§Ù‚",t:"Le Pourvoyeur",d:"Il assure la subsistance de chaque crÃ©ature. Fais confiance â€” Il pourvoira."},
            {n:"Al-FattÃ¢h",a:"Ø§Ù„ÙØªØ§Ø­",t:"L'Ouvreur des portes",d:"Quand toutes les portes semblent fermÃ©es, Il peut en ouvrir une que tu n'imaginais pas."},
            {n:"Al-'AlÃ®m",a:"Ø§Ù„Ø¹Ù„ÙŠÙ…",t:"L'Omniscient",d:"Il sait tout â€” tes pensÃ©es secrÃ¨tes, tes douleurs cachÃ©es. Rien n'est trop petit pour Son attention."},
            {n:"Al-BÃ¢sit",a:"Ø§Ù„Ø¨Ø§Ø³Ø·",t:"Celui qui Ã©tend",d:"Il Ã©largit les provisions quand Il veut. AprÃ¨s la contraction vient l'expansion."},
            {n:"Ar-RÃ¢fi'",a:"Ø§Ù„Ø±Ø§ÙØ¹",t:"Celui qui Ã©lÃ¨ve",d:"Il Ã©lÃ¨ve qui Il veut en dignitÃ©, en rang, en foi. Seul Lui peut te hisser vraiment."},
            {n:"As-SamÃ®'",a:"Ø§Ù„Ø³Ù…ÙŠØ¹",t:"L'Audient",d:"Il entend chaque dua murmurÃ© dans la nuit. Tu n'as jamais besoin de crier pour Ãªtre entendu."},
            {n:"Al-BasÃ®r",a:"Ø§Ù„Ø¨ØµÙŠØ±",t:"Le Clairvoyant",d:"Il voit tout, y compris ce que tu caches."},
            {n:"Al-'Adl",a:"Ø§Ù„Ø¹Ø¯Ù„",t:"Le Juste",d:"Sa justice est absolue. Tout ce qui arrive a une sagesse, mÃªme si tu ne la vois pas."},
            {n:"Al-LatÃ®f",a:"Ø§Ù„Ù„Ø·ÙŠÙ",t:"Le Subtil",d:"Il agit de faÃ§on dÃ©licate, imperceptible. Il t'a guidÃ© bien des fois sans que tu t'en rendes compte."},
            {n:"Al-HalÃ®m",a:"Ø§Ù„Ø­Ù„ÙŠÙ…",t:"Le ClÃ©ment",d:"Il ne se prÃ©cipite pas dans la punition. Sa clÃ©mence est un espace pour le repentir."},
            {n:"Al-GhafÃ»r",a:"Ø§Ù„ØºÙÙˆØ±",t:"Le Pardonneur",d:"Il pardonne immensÃ©ment. Parmi Ses noms les plus rÃ©currents dans le Coran â€” c'est un message pour nous."},
            {n:"Ash-ShakÃ»r",a:"Ø§Ù„Ø´ÙƒÙˆØ±",t:"Le TrÃ¨s-Reconnaissant",d:"Il rÃ©compense mÃªme le petit effort au-delÃ  de ce qu'on mÃ©rite."},
            {n:"Al-HafÃ®z",a:"Ø§Ù„Ø­ÙÙŠØ¸",t:"Le Gardien",d:"Il te protÃ¨ge, toi et ceux que tu aimes, mÃªme quand tu dors."},
            {n:"Al-KarÃ®m",a:"Ø§Ù„ÙƒØ±ÙŠÙ…",t:"Le Tout-GÃ©nÃ©reux",d:"Sa gÃ©nÃ©rositÃ© est sans fond. Demande-Lui â€” Il n'est jamais avare."},
            {n:"Al-MujÃ®b",a:"Ø§Ù„Ù…Ø¬ÙŠØ¨",t:"Celui qui exauce",d:"Il rÃ©pond Ã  chaque invocation. Parfois immÃ©diatement, parfois diffÃ©rÃ© â€” mais Il rÃ©pond toujours."},
            {n:"Al-WadÃ»d",a:"Ø§Ù„ÙˆØ¯ÙˆØ¯",t:"L'Affectueux",d:"Il est le seul Ã  t'aimer inconditionnellement, parfaitement et pour toujours."},
            {n:"Al-Haqq",a:"Ø§Ù„Ø­Ù‚",t:"Le Vrai",d:"Il est la seule rÃ©alitÃ© absolue. Tout le reste est Ã©phÃ©mÃ¨re."},
            {n:"Al-WakÃ®l",a:"Ø§Ù„ÙˆÙƒÙŠÙ„",t:"Le GÃ©rant",d:"'Hasbunallah wa ni'mal wakÃ®l' â€” Allah nous suffit ! Confie-Lui tes affaires."},
            {n:"Al-Waliyy",a:"Ø§Ù„ÙˆÙ„ÙŠ",t:"Le Protecteur alliÃ©",d:"Il est le protecteur des croyants. 'Allah est le protecteur de ceux qui croient.' (2:257)"},
            {n:"Al-HamÃ®d",a:"Ø§Ù„Ø­Ù…ÙŠØ¯",t:"Le Digne de Louange",d:"Toute louange Lui revient. 'Al-Hamdu lillah' â€” la louange appartient Ã  Allah."},
            {n:"Al-MuhyÃ®",a:"Ø§Ù„Ù…Ø­ÙŠÙŠ",t:"Celui qui fait vivre",d:"Il peut vivifier un cÅ“ur mort, une foi morte. La renaissance est toujours possible."},
            {n:"Al-Hayy",a:"Ø§Ù„Ø­ÙŠ",t:"Le Vivant",d:"Il vit d'une vie parfaite et Ã©ternelle. Ayat al-KursÃ® : 'Al-Hayy Al-QayyÃ»m'"},
            {n:"Al-QayyÃ»m",a:"Ø§Ù„Ù‚ÙŠÙˆÙ…",t:"Le Subsistant",d:"Il se suffit Ã  Lui-mÃªme et tout dÃ©pend de Lui. Sans Lui, rien ne subsisterait un seul instant."},
            {n:"Al-WÃ¢hid",a:"Ø§Ù„ÙˆØ§Ø­Ø¯",t:"L'Unique",d:"Il est Un sans associÃ©, sans semblable. Tout part de lÃ ."},
            {n:"Al-Ahad",a:"Ø§Ù„Ø£Ø­Ø¯",t:"L'Un",d:"Absolument Un, indivisible, incomparable. La base de tout le tawhid."},
            {n:"As-Samad",a:"Ø§Ù„ØµÙ…Ø¯",t:"Le Soutien universel",d:"Tout le monde a besoin de Lui. Lui n'a besoin de personne."},
            {n:"Al-QÃ¢dir",a:"Ø§Ù„Ù‚Ø§Ø¯Ø±",t:"Le Puissant",d:"Il peut tout faire. Aucune demande n'est trop grande pour Lui."},
            {n:"Al-Awwal",a:"Ø§Ù„Ø£ÙˆÙ„",t:"Le Premier",d:"Il est avant toute chose. Il n'y avait rien avant Lui."},
            {n:"Al-Ã‚khir",a:"Ø§Ù„Ø¢Ø®Ø±",t:"Le Dernier",d:"Il demeure aprÃ¨s toute chose. Quand tout disparaÃ®t, Il reste."},
            {n:"Al-BÃ¢tin",a:"Ø§Ù„Ø¨Ø§Ø·Ù†",t:"Le CachÃ©",d:"Son Essence est inaccessible. On Le connaÃ®t par Ses noms et attributs."},
            {n:"Al-Barr",a:"Ø§Ù„Ø¨Ø±",t:"Le Bienfaisant",d:"Il est plein de bontÃ© envers Ses crÃ©atures. MÃªme les non-croyants bÃ©nÃ©ficient de Sa bontÃ©."},
            {n:"At-TawwÃ¢b",a:"Ø§Ù„ØªÙˆØ§Ø¨",t:"L'Accueillant au repentir",d:"Il accepte le repentir encore et encore. Chaque retour vers Lui est une nouvelle naissance."},
            {n:"Al-'Afuww",a:"Ø§Ù„Ø¹ÙÙˆ",t:"L'Indulgent",d:"Il efface les fautes sans mÃªme les rappeler. 'AllÃ¢humma innaka 'afuwwun...'"},
            {n:"Ar-Ra'Ã»f",a:"Ø§Ù„Ø±Ø¤ÙˆÙ",t:"Le Bienveillant",d:"Sa bienveillance est une tendresse douce et attentive. Comme une mÃ¨re mais en infiniment plus."},
            {n:"An-NÃ»r",a:"Ø§Ù„Ù†ÙˆØ±",t:"La LumiÃ¨re",d:"Il est la LumiÃ¨re des cieux et de la terre. Demande-Lui la lumiÃ¨re du cÅ“ur."},
            {n:"Al-HÃ¢dÃ®",a:"Ø§Ù„Ù‡Ø§Ø¯ÙŠ",t:"Le Guide",d:"Il guide qui Il veut. Demande-Lui la guidance chaque jour."},
            {n:"Al-BÃ¢qÃ®",a:"Ø§Ù„Ø¨Ø§Ù‚ÙŠ",t:"Le Permanent",d:"Il dure Ã©ternellement. Tout ce que tu aimes passera â€” Lui seul demeure."},
            {n:"As-SabÃ»r",a:"Ø§Ù„ØµØ¨ÙˆØ±",t:"Le Patient",d:"Il ne Se prÃ©cipite pas dans la punition. Sa patience est un espace pour ton repentir."},
        ];

        // ============ ARABIC LETTERS ============
        const ARABIC_LETTERS = [
            {l:"Ø§",n:"Alif",s:"Ã¢ / a",ex:"Ø£ÙŽÙ„ÙŽÙ… (Alam)"},
            {l:"Ø¨",n:"BÃ¢",s:"b",ex:"Ø¨ÙŽÙŠØª (Maison)"},
            {l:"Øª",n:"TÃ¢",s:"t",ex:"ØªÙŽÙˆØ¨Ø© (Repentir)"},
            {l:"Ø«",n:"ThÃ¢",s:"th",ex:"Ø«ÙŽÙˆØ§Ø¨ (RÃ©compense)"},
            {l:"Ø¬",n:"JÃ®m",s:"dj",ex:"Ø¬ÙŽÙ†ÙŽÙ‘Ø© (Paradis)"},
            {l:"Ø­",n:"HÃ¢",s:"h aspirÃ©",ex:"Ø­ÙŽÙ…Ø¯ (Louange)"},
            {l:"Ø®",n:"KhÃ¢",s:"kh",ex:"Ø®ÙŽÙŠØ± (Bien)"},
            {l:"Ø¯",n:"DÃ¢l",s:"d",ex:"Ø¯ÙØ¹Ø§Ø¡ (Dua)"},
            {l:"Ø°",n:"DhÃ¢l",s:"dh",ex:"Ø°ÙÙƒØ± (Dhikr)"},
            {l:"Ø±",n:"RÃ¢",s:"r roulÃ©",ex:"Ø±ÙŽØ­Ù…Ø© (MisÃ©ricorde)"},
            {l:"Ø²",n:"ZÃ¢y",s:"z",ex:"Ø²ÙŽÙƒØ§Ø© (ZakÃ¢t)"},
            {l:"Ø³",n:"SÃ®n",s:"s",ex:"Ø³ÙŽÙ„Ø§Ù… (Paix)"},
            {l:"Ø´",n:"ShÃ®n",s:"ch",ex:"Ø´ÙÙƒØ± (Gratitude)"},
            {l:"Øµ",n:"SÃ¢d",s:"s emphatique",ex:"ØµÙŽØ¨Ø± (Patience)"},
            {l:"Ø¶",n:"DÃ¢d",s:"d emphatique",ex:"Ø¶ÙŽÙˆØ¡ (LumiÃ¨re)"},
            {l:"Ø·",n:"TÃ¢ emp.",s:"t emphatique",ex:"Ø·ÙŽÙ‡Ø§Ø±Ø© (PuretÃ©)"},
            {l:"Ø¹",n:"'Ayn",s:"' guttural",ex:"Ø¹ÙÙ„Ù… (Savoir)"},
            {l:"Øº",n:"Ghayn",s:"gh",ex:"ØºÙŽÙÙÙˆØ± (Pardonneur)"},
            {l:"Ù",n:"FÃ¢",s:"f",ex:"ÙÙŽØ¬Ø± (Fajr)"},
            {l:"Ù‚",n:"QÃ¢f",s:"q guttural",ex:"Ù‚ÙØ±Ø¢Ù† (Coran)"},
            {l:"Ùƒ",n:"KÃ¢f",s:"k",ex:"ÙƒÙØªØ§Ø¨ (Livre)"},
            {l:"Ù„",n:"LÃ¢m",s:"l",ex:"Ù„ÙŽÙŠÙ„ (Nuit)"},
            {l:"Ù…",n:"MÃ®m",s:"m",ex:"Ù…ÙŽØ³Ø¬Ø¯ (MosquÃ©e)"},
            {l:"Ù†",n:"NÃ»n",s:"n",ex:"Ù†ÙÙˆØ± (LumiÃ¨re)"},
            {l:"Ù‡",n:"HÃ¢",s:"h doux",ex:"Ù‡ÙØ¯Ø§ÙŠØ© (Guidance)"},
            {l:"Ùˆ",n:"WÃ¢w",s:"w / Ã»",ex:"ÙˆÙØ¶ÙˆØ¡ (Wudu)"},
            {l:"ÙŠ",n:"YÃ¢",s:"y / Ã®",ex:"ÙŠÙŽÙ‚ÙŠÙ† (Certitude)"},
        ];

        window.SURAHS = SURAHS;
        window.PROPHETS = PROPHETS;
        window.ALLAH_NAMES = ALLAH_NAMES;
        window.ARABIC_LETTERS = ARABIC_LETTERS;

        // ============ SESSION STATE ============
        let sessionState = null;
        let timerInterval = null;
        let elapsedTime = 0;
        let activeLetterIdx = 0;
        let activeProphetIdx = -1;
        let allahSearchFilter = '';

        // ============ SPEAK ============
        function speakArabic(text) {
            if (!('speechSynthesis' in window)) { showToast('Audio non disponible sur cet appareil'); return; }
            window.speechSynthesis.cancel();
            const utt = new SpeechSynthesisUtterance(text);
            utt.lang = 'ar-SA';
            utt.rate = 0.75;
            // Try to find Arabic voice, retry after delay if voices not loaded yet
            const trySpeak = () => {
                const voices = window.speechSynthesis.getVoices();
                const arabicVoice = voices.find(v => v.lang && v.lang.startsWith('ar'));
                if (arabicVoice) utt.voice = arabicVoice;
                window.speechSynthesis.speak(utt);
            };
            if (window.speechSynthesis.getVoices().length > 0) { trySpeak(); }
            else { window.speechSynthesis.onvoiceschanged = trySpeak; setTimeout(trySpeak, 800); }
        }
        window.speakArabic = speakArabic;

        // ============ TOAST ============
        function showToast(msg) {
            const t = document.createElement('div');
            t.className = 'toast-anim fixed top-6 left-1/2 -translate-x-1/2 bg-white text-rose-600 px-6 py-3 rounded-2xl text-xs font-bold z-[999] shadow-xl border border-rose-200';
            t.innerText = msg;
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 2500);
        }
        window.showToast = showToast;

        // ============ NAVIGATION ============
        const TABS = ['home','train','arabic','prophets','allah','foundations','duas'];
        window.showTab = (tab) => {
            TABS.forEach(t => {
                document.getElementById('tab-'+t)?.classList.add('hidden');
                document.getElementById('nav-'+t)?.classList.remove('active-nav');
            });
            document.getElementById('tab-'+tab)?.classList.remove('hidden');
            document.getElementById('nav-'+tab)?.classList.add('active-nav');
            window.scrollTo(0,0);
            if (tab === 'home') renderHome();
            if (tab === 'arabic') renderArabicTab();
            if (tab === 'prophets') renderProphets();
            if (tab === 'allah') renderAllahNames();
            if (tab === 'train') { document.getElementById('surah-selector').classList.remove('hidden'); document.getElementById('session-view').classList.add('hidden'); document.getElementById('result-view').classList.add('hidden'); }
        };

        // ============ HOME ============
        function renderHome() {
            const today = new Date().toISOString().split('T')[0];
            const todaySess = sessions.filter(s => new Date(s.ts).toISOString().split('T')[0] === today);
            document.getElementById('streak-val').innerText = userData.streak||0;
            document.getElementById('today-val').innerText = todaySess.length;
            document.getElementById('total-val').innerText = sessions.length;

            const levelLabels = ['','â­','â­â­','â­â­â­'];
            const barColors = ['','bg-rose-300','bg-amber-300','bg-purple-300'];
            document.getElementById('home-surahs').innerHTML = SURAHS.map(s => {
                const sc = (scores[s.id])||{attempts:0,easy:0};
                const pct = sc.attempts>0 ? Math.round((sc.easy/sc.attempts)*100) : 0;
                return `<button onclick="window.startSession('${s.id}')" class="card p-4 text-left active:scale-95 transition-all w-full">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="text-xl">${s.emoji}</span>
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between"><p class="font-bold text-sm truncate">${s.name}</p><span class="text-xs text-stone-400 ml-1">${s.verses.length}v</span></div>
                            <p class="text-xs text-stone-400">${levelLabels[s.level]}</p>
                        </div>
                    </div>
                    <div class="w-full bg-rose-50 rounded-full h-1.5"><div class="${barColors[s.level]} h-1.5 rounded-full" style="width:${pct}%"></div></div>
                    <p class="text-[10px] text-stone-400 mt-1">${sc.attempts>0?`${pct}% fluide Â· ${sc.attempts} lecture${sc.attempts>1?'s':''}` : 'Pas encore pratiquÃ©'}</p>
                </button>`;
            }).join('');
        }

        // ============ TRAINING ============
        window.startSession = (surahId) => {
            const surah = SURAHS.find(s=>s.id===surahId);
            if (!surah) return;
            sessionState = {surahId, verseIndex:0, startTime:Date.now(), ratings:[]};
            elapsedTime = 0;
            document.getElementById('sess-surah-name').innerText = surah.name;
            document.getElementById('sess-surah-ar').innerText = surah.nameAr;
            document.getElementById('sess-tip').innerText = 'ðŸ’¡ '+surah.tip;
            renderVerseInSession();
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(()=>{
                elapsedTime++;
                const m=Math.floor(elapsedTime/60).toString().padStart(2,'0');
                const s=(elapsedTime%60).toString().padStart(2,'0');
                document.getElementById('sess-timer').innerText=`${m}:${s}`;
            },1000);
            document.getElementById('surah-selector').classList.add('hidden');
            document.getElementById('session-view').classList.remove('hidden');
            window.scrollTo(0,0);
        };

        function renderVerseInSession() {
            if (!sessionState) return;
            const surah = SURAHS.find(s=>s.id===sessionState.surahId);
            const verse = surah.verses[sessionState.verseIndex];
            document.getElementById('sess-verse-num').innerText = `Verset ${verse.n}`;
            document.getElementById('sess-verse-ar').innerText = verse.ar;
            document.getElementById('sess-verse-tr').innerText = verse.tr;
            document.getElementById('sess-progress-txt').innerText = `${sessionState.verseIndex+1} / ${surah.verses.length}`;
            document.getElementById('sess-progress-bar').style.width = `${((sessionState.verseIndex+1)/surah.verses.length)*100}%`;
            document.querySelectorAll('.rating-btn').forEach(b=>b.classList.remove('sel'));
        }

        window.speakCurrentVerse = () => {
            if (!sessionState) return;
            const surah = SURAHS.find(s=>s.id===sessionState.surahId);
            speakArabic(surah.verses[sessionState.verseIndex].ar);
        };

        window.rateVerse = (rating) => {
            if (!sessionState) return;
            sessionState.ratings.push(rating);
            document.querySelectorAll('.rating-btn').forEach(b=>b.classList.remove('sel'));
            document.getElementById('rate-'+rating).classList.add('sel');
            setTimeout(()=>{
                const surah = SURAHS.find(s=>s.id===sessionState.surahId);
                if (sessionState.verseIndex < surah.verses.length-1) {
                    sessionState.verseIndex++;
                    renderVerseInSession();
                } else {
                    finishSession();
                }
            },400);
        };

        async function finishSession() {
            clearInterval(timerInterval);
            const surah = SURAHS.find(s=>s.id===sessionState.surahId);
            const ratings = sessionState.ratings;
            if (!scores[sessionState.surahId]) scores[sessionState.surahId]={easy:0,medium:0,hard:0,attempts:0};
            const sc = scores[sessionState.surahId];
            sc.attempts++;
            ratings.forEach(r=>{ if(r==='easy')sc.easy++; else if(r==='medium')sc.medium++; else sc.hard++; });
            sessions.push({ts:Date.now(),surahId:sessionState.surahId,verseCount:surah.verses.length,duration:elapsedTime,ratings});
            const today=new Date().toISOString().split('T')[0];
            const yesterday=new Date(Date.now()-86400000).toISOString().split('T')[0];
            if(userData.lastSession===yesterday) userData.streak=(userData.streak||0)+1;
            else if(userData.lastSession!==today) userData.streak=1;
            userData.lastSession=today;
            await saveMain();
            const easyCount=ratings.filter(r=>r==='easy').length;
            const hardCount=ratings.filter(r=>r==='hard').length;
            const pct=ratings.length>0?Math.round((easyCount/ratings.length)*100):0;
            document.getElementById('result-surah').innerText=surah.name+' Â· '+surah.nameAr;
            document.getElementById('result-duration').innerText=`â± ${Math.floor(elapsedTime/60)}:${(elapsedTime%60).toString().padStart(2,'0')}`;
            document.getElementById('result-pct').innerText=pct+'%';
            document.getElementById('result-easy').innerText=easyCount;
            document.getElementById('result-hard').innerText=hardCount;
            let msg = pct>=80?'ðŸŒ¸ Mashallah ! Tu lis vraiment bien !': pct>=50?'ðŸ’ª Bien ! Continue Ã  pratiquer les parties difficiles.':'ðŸ“š Reviens sur les versets difficiles. La rÃ©gularitÃ© fait tout.';
            document.getElementById('result-msg').innerText=msg;
            document.getElementById('session-view').classList.add('hidden');
            document.getElementById('result-view').classList.remove('hidden');
            sessionState=null;
        }

        window.backToSelector = () => {
            if(timerInterval){clearInterval(timerInterval);sessionState=null;}
            document.getElementById('session-view').classList.add('hidden');
            document.getElementById('result-view').classList.add('hidden');
            document.getElementById('surah-selector').classList.remove('hidden');
        };

        // ============ ARABIC TAB ============
        function renderArabicTab() {
            // Letters grid
            const grid = document.getElementById('letters-grid');
            if (grid && grid.children.length === 0) {
                grid.innerHTML = ARABIC_LETTERS.map((l,i) => `<button class="letter-btn${i===0?' active-letter':''}" onclick="window.showLetter(${i})">
                    <p class="amiri text-2xl text-rose-600">${l.l}</p>
                    <p class="text-[10px] text-stone-500 mt-1 font-semibold">${l.n}</p>
                </button>`).join('');
                showLetter(0);
            }
        }

        window.showLetter = (i) => {
            activeLetterIdx = i;
            const l = ARABIC_LETTERS[i];
            document.getElementById('letter-display').innerText = l.l;
            document.getElementById('letter-name').innerText = l.n;
            document.getElementById('letter-sound').innerText = 'Son : '+l.s;
            document.getElementById('letter-example').innerText = l.ex;
            document.querySelectorAll('.letter-btn').forEach((b,j) => b.classList.toggle('active-letter', j===i));
        };

        window.speakLetter = () => {
            speakArabic(ARABIC_LETTERS[activeLetterIdx].l);
        };

        // ============ PROPHETS ============
        function renderProphets() {
            const list = document.getElementById('prophets-grid');
            if (list && list.children.length === 0) {
                list.innerHTML = PROPHETS.map((p,i) => `<button onclick="window.showProphet(${i})" class="card p-4 text-left active:scale-95 transition-all">
                    <span class="text-2xl block mb-2">${p.emoji}</span>
                    <p class="font-bold text-sm">${p.name}</p>
                    <p class="text-[10px] text-stone-400 mt-0.5">${p.sub}</p>
                </button>`).join('');
            }
        }

        window.showProphet = (i) => {
            activeProphetIdx = i;
            const p = PROPHETS[i];
            document.getElementById('prophet-emoji').innerText = p.emoji;
            document.getElementById('prophet-name-big').innerText = p.name;
            document.getElementById('prophet-sub').innerText = p.sub;
            document.getElementById('prophet-story').innerText = p.story;
            document.getElementById('prophets-list-view').classList.add('hidden');
            document.getElementById('prophet-detail').classList.remove('hidden');
        };
        window.backToProphets = () => {
            document.getElementById('prophet-detail').classList.add('hidden');
            document.getElementById('prophets-list-view').classList.remove('hidden');
        };

        // ============ ALLAH NAMES ============
        function renderAllahNames() {
            const container = document.getElementById('allah-names-list');
            if (!container) return;
            const filter = allahSearchFilter.toLowerCase();
            const filtered = ALLAH_NAMES.filter(n => filter==='' || n.n.toLowerCase().includes(filter) || n.t.toLowerCase().includes(filter));
            container.innerHTML = filtered.map((n,i) => `<button onclick="window.showAllahName(${ALLAH_NAMES.indexOf(n)})" class="card p-4 text-left w-full active:scale-95 transition-all flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <span class="amiri text-2xl text-rose-500">${n.a}</span>
                    <div><p class="font-bold text-sm">${n.n}</p><p class="text-xs text-stone-400">${n.t}</p></div>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
            </button>`).join('');
            document.getElementById('allah-count').innerText = ALLAH_NAMES.length;
        }

        window.showAllahName = (i) => {
            const n = ALLAH_NAMES[i];
            document.getElementById('aname-ar').innerText = n.a;
            document.getElementById('aname-n').innerText = n.n;
            document.getElementById('aname-t').innerText = n.t;
            document.getElementById('aname-d').innerText = n.d;
            document.getElementById('aname-detail').classList.remove('hidden');
            document.getElementById('aname-detail').scrollIntoView({behavior:'smooth', block:'nearest'});
        };

        window.filterAllahNames = (val) => {
            allahSearchFilter = val;
            renderAllahNames();
        };

        // ============ DUAS ============
        window.renderDuas = () => {
            document.getElementById('personal-duas-list').innerHTML = personalDuas.length > 0
                ? personalDuas.slice().reverse().map((d,ri) => {
                    const i = personalDuas.length-1-ri;
                    return `<div class="card p-4">
                        <div class="flex justify-between mb-1">
                            <p class="font-bold text-sm text-rose-600">${d.title||'Ma dua'}</p>
                            <button onclick="window.deleteDua(${i})" class="text-stone-300 text-xs">âœ•</button>
                        </div>
                        <p class="text-sm text-stone-500 leading-relaxed">${d.text}</p>
                    </div>`;
                }).join('')
                : '<p class="text-stone-400 italic text-sm text-center py-6">Tes duas personnelles s\'afficheront ici ðŸ¤²</p>';
        };

        window.addDua = async () => {
            const title = document.getElementById('dua-title-inp').value.trim();
            const text = document.getElementById('dua-text-inp').value.trim();
            if (!text) return;
            personalDuas.push({title, text, ts:Date.now()});
            document.getElementById('dua-title-inp').value='';
            document.getElementById('dua-text-inp').value='';
            await saveDuas();
            window.renderDuas();
            showToast('Dua sauvegardÃ©e ðŸ¤²');
        };

        window.deleteDua = async (i) => {
            personalDuas.splice(i,1);
            await saveDuas();
            window.renderDuas();
        };

        // ============ INIT ============
        function showApp() {
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            renderHome();
        }

        async function initApp() {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.getVoices();
                window.speechSynthesis.onvoiceschanged = () => window.speechSynthesis.getVoices();
            }
            // Timeout de sÃ©curitÃ© : 4s max, puis l'app s'ouvre quoi qu'il arrive
            const safetyTimer = setTimeout(() => showApp(), 4000);
            try {
                await Promise.race([
                    loadAll(),
                    new Promise(resolve => setTimeout(resolve, 3500))
                ]);
            } catch(e) { console.error(e); }
            clearTimeout(safetyTimer);
            showApp();
        }

        window.onload = initApp;
    </script>
</head>
<body class="pb-nav">

<!-- LOADING -->
<div id="loading" class="fixed inset-0 z-[500] flex flex-col items-center justify-center gap-5" style="background:#FDF8F3">
    <div class="w-16 h-16 rounded-full flex items-center justify-center text-3xl" style="background:linear-gradient(135deg,#E8A4A4,#C47A7A);box-shadow:0 8px 24px rgba(196,122,122,0.3)">ðŸŒ¸</div>
    <div>
        <p class="playfair text-2xl font-bold text-center" style="color:#3D2B2B">Salam Samia ðŸŒ™</p>
        <p class="amiri text-xl text-center mt-1" style="color:#C47A7A">Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…</p>
    </div>
    <div class="flex gap-1.5 mt-2">
        <div class="w-2 h-2 rounded-full bg-rose-300 animate-bounce" style="animation-delay:0s"></div>
        <div class="w-2 h-2 rounded-full bg-rose-400 animate-bounce" style="animation-delay:0.15s"></div>
        <div class="w-2 h-2 rounded-full bg-rose-500 animate-bounce" style="animation-delay:0.3s"></div>
    </div>
</div>

<!-- APP -->
<div id="app" class="hidden">

<!-- ===================== HOME TAB ===================== -->
<div id="tab-home" class="px-4 pb-nav">
    <header class="pt-12 pb-5 flex justify-between items-start">
        <div>
            <p class="text-xs uppercase font-bold tracking-widest text-stone-400">Salam 'Alaykum</p>
            <h1 class="playfair text-3xl font-bold mt-1" style="color:#3D2B2B">Samia ðŸŒ¸</h1>
            <p class="text-xs font-medium mt-0.5 text-rose-400">EntraÃ®ne ta lecture arabe</p>
        </div>
        <div class="w-14 h-14 rounded-2xl flex items-center justify-center text-2xl" style="background:linear-gradient(135deg,#E8A4A4,#C47A7A);box-shadow:0 4px 16px rgba(196,122,122,0.3)">ðŸ“–</div>
    </header>

    <!-- Petites stats -->
    <div class="grid grid-cols-3 gap-3 mb-5">
        <div class="card p-4 text-center">
            <p class="text-xl font-black text-rose-500" id="streak-val">0</p>
            <p class="text-[9px] text-stone-400 uppercase font-bold tracking-widest mt-1">SÃ©rie ðŸ”¥</p>
        </div>
        <div class="card p-4 text-center">
            <p class="text-xl font-black text-purple-400" id="today-val">0</p>
            <p class="text-[9px] text-stone-400 uppercase font-bold tracking-widest mt-1">Auj.</p>
        </div>
        <div class="card p-4 text-center">
            <p class="text-xl font-black text-amber-500" id="total-val">0</p>
            <p class="text-[9px] text-stone-400 uppercase font-bold tracking-widest mt-1">Total</p>
        </div>
    </div>

    <!-- Surahs -->
    <h2 class="text-xs font-black uppercase tracking-widest text-stone-400 mb-3">Sourates â€” clique pour t'entraÃ®ner</h2>
    <div class="grid grid-cols-2 gap-3" id="home-surahs"></div>
</div>

<!-- ===================== TRAIN TAB ===================== -->
<div id="tab-train" class="hidden px-4 pb-nav">
    <!-- Selector -->
    <div id="surah-selector">
        <header class="pt-12 pb-5">
            <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">EntraÃ®ner ðŸŽ¯</h1>
            <p class="text-stone-400 text-sm mt-1">Lis Ã  voix haute, note ta fluiditÃ©</p>
        </header>
        <div class="card-soft p-5 mb-5" style="border-color:#F0D8D8">
            <p class="text-xs font-black uppercase tracking-widest text-rose-500 mb-3">Comment Ã§a marche</p>
            <div class="grid grid-cols-3 gap-2">
                <div class="bg-white rounded-2xl p-3 text-center border border-rose-100">
                    <p class="text-lg mb-1">ðŸ‘ï¸</p><p class="text-xs font-bold text-emerald-600">Lis le verset</p>
                </div>
                <div class="bg-white rounded-2xl p-3 text-center border border-rose-100">
                    <p class="text-lg mb-1">ðŸ”Š</p><p class="text-xs font-bold text-purple-500">Ã‰coute si besoin</p>
                </div>
                <div class="bg-white rounded-2xl p-3 text-center border border-rose-100">
                    <p class="text-lg mb-1">â­</p><p class="text-xs font-bold text-rose-500">Note ta fluiditÃ©</p>
                </div>
            </div>
        </div>
        <p class="text-xs font-black uppercase tracking-widest text-stone-400 mb-3">Choisir une sourate</p>
        <div class="grid grid-cols-2 gap-3">
            <script>document.write(window.SURAHS?.map((s,i)=>`<button onclick="window.startSession('${s.id}')" class="card p-4 text-left active:scale-95 transition-all"><span class="text-xl block mb-2">${s.emoji}</span><p class="font-bold text-sm">${s.name}</p><p class="text-xs text-stone-400">${s.verses?.length||'?'}v Â· ${'â­'.repeat(s.level)}</p></button>`).join('')||'')</script>
        </div>
    </div>

    <!-- Session View -->
    <div id="session-view" class="hidden">
        <header class="pt-10 pb-4">
            <div class="flex justify-between items-center mb-3">
                <button onclick="window.backToSelector()" class="flex items-center gap-1.5 text-rose-500 font-bold text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
                    ArrÃªter
                </button>
                <span id="sess-timer" class="text-stone-400 text-sm font-mono font-bold">00:00</span>
            </div>
            <div class="flex items-baseline gap-3">
                <h2 class="playfair text-2xl font-bold" style="color:#3D2B2B" id="sess-surah-name">Fatiha</h2>
                <span class="amiri text-xl text-rose-400" id="sess-surah-ar">Ø§Ù„ÙØ§ØªØ­Ø©</span>
            </div>
            <div class="flex items-center justify-between mt-3">
                <p class="text-[10px] text-stone-400 font-bold" id="sess-progress-txt">1 / 7</p>
                <p class="text-[10px] text-stone-400 uppercase font-black tracking-widest">progression</p>
            </div>
            <div class="w-full bg-rose-100 rounded-full h-1.5 mt-1.5">
                <div id="sess-progress-bar" class="h-1.5 rounded-full transition-all" style="background:linear-gradient(90deg,#E8A4A4,#C47A7A);width:14%"></div>
            </div>
        </header>

        <!-- Tip -->
        <div class="rounded-2xl px-4 py-3 mb-4" style="background:#EDE7F6;border:1px solid #D1C4E9">
            <p class="text-xs text-purple-600 leading-relaxed" id="sess-tip"></p>
        </div>

        <!-- Verse -->
        <div class="card p-6 mb-4 fade-up">
            <p class="text-[10px] text-stone-400 uppercase font-black tracking-widest mb-4" id="sess-verse-num">Verset 1</p>
            <p class="amiri text-3xl text-right leading-loose mb-5" style="color:#3D2B2B;line-height:2.6rem" id="sess-verse-ar"></p>
            <div class="border-t pt-4" style="border-color:#F0E0D6">
                <p class="text-sm text-stone-500 italic leading-relaxed" id="sess-verse-tr"></p>
            </div>
        </div>

        <!-- Listen -->
        <button onclick="window.speakCurrentVerse()" class="w-full card p-3 flex items-center justify-center gap-2 text-stone-400 text-sm font-semibold mb-4 active:scale-95 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
            Ã‰couter la prononciation arabe ðŸ”Š
        </button>

        <!-- Rating -->
        <p class="text-[10px] text-stone-400 uppercase font-black tracking-widest text-center mb-3">Comment tu as lu ce verset ?</p>
        <div class="grid grid-cols-3 gap-3 mb-6">
            <button id="rate-easy" onclick="window.rateVerse('easy')" class="rating-btn card p-4 text-center active:scale-95 transition-all">
                <p class="text-2xl mb-1">âœ…</p><p class="text-xs font-bold text-emerald-600">Fluide</p>
            </button>
            <button id="rate-medium" onclick="window.rateVerse('medium')" class="rating-btn card p-4 text-center active:scale-95 transition-all">
                <p class="text-2xl mb-1">ðŸ”¸</p><p class="text-xs font-bold text-amber-500">Correct</p>
            </button>
            <button id="rate-hard" onclick="window.rateVerse('hard')" class="rating-btn card p-4 text-center active:scale-95 transition-all">
                <p class="text-2xl mb-1">â—</p><p class="text-xs font-bold text-rose-500">Difficile</p>
            </button>
        </div>
    </div>

    <!-- Result -->
    <div id="result-view" class="hidden fade-up">
        <header class="pt-10 pb-5">
            <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">Session terminÃ©e ðŸŽ‰</h1>
        </header>
        <div class="rounded-2xl p-6 text-center mb-4" style="background:linear-gradient(135deg,#F9EEE8,#F0D8D8);border:1px solid #E8C4C4">
            <p class="amiri text-xl text-rose-600 mb-1" id="result-surah">Al-Fatiha</p>
            <p class="text-stone-400 text-xs" id="result-duration">â± 1:32</p>
            <p class="playfair text-6xl font-bold text-rose-500 my-4" id="result-pct">75%</p>
            <p class="text-xs text-stone-400 uppercase font-black tracking-widest">FluiditÃ© globale</p>
        </div>
        <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="card p-4 text-center"><p class="text-2xl font-black text-emerald-500" id="result-easy">0</p><p class="text-[9px] text-stone-400 uppercase font-bold tracking-widest mt-1">Fluides</p></div>
            <div class="card p-4 text-center"><p class="text-2xl font-black text-rose-400" id="result-hard">0</p><p class="text-[9px] text-stone-400 uppercase font-bold tracking-widest mt-1">Ã€ retravailler</p></div>
        </div>
        <div class="card p-4 mb-5"><p class="text-sm text-stone-500 leading-relaxed" id="result-msg"></p></div>
        <div class="grid grid-cols-2 gap-3">
            <button onclick="window.backToSelector()" class="card p-4 text-center text-stone-500 font-semibold text-sm active:scale-95 transition-all">Autre sourate</button>
            <button onclick="window.backToSelector()" class="rose-btn p-4 text-center text-sm active:scale-95 transition-all">ðŸ” Rejouer</button>
        </div>
    </div>
</div>

<!-- ===================== ARABIC TAB ===================== -->
<div id="tab-arabic" class="hidden px-4 pb-nav">
    <header class="pt-12 pb-5">
        <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">Arabe ðŸ”¤</h1>
        <p class="text-stone-400 text-sm mt-1">Lettres et voyelles</p>
    </header>

    <!-- Letter detail card -->
    <div class="card p-6 mb-4 text-center">
        <p class="amiri text-7xl text-rose-500 mb-3" id="letter-display">Ø§</p>
        <p class="playfair text-xl font-bold" style="color:#3D2B2B" id="letter-name">Alif</p>
        <p class="text-sm text-stone-400 mt-1" id="letter-sound">Son : Ã¢ / a</p>
        <p class="text-xs text-stone-400 mt-1" id="letter-example">Ø£ÙŽÙ„ÙŽÙ… (Alam)</p>
        <button onclick="window.speakLetter()" class="mt-4 rose-btn px-6 py-2.5 text-sm inline-flex items-center gap-2 active:scale-95 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
            Ã‰couter
        </button>
    </div>

    <!-- Letters grid -->
    <p class="text-xs font-black uppercase tracking-widest text-stone-400 mb-3">Les 28 lettres</p>
    <div class="grid grid-cols-4 gap-2 mb-6" id="letters-grid"></div>

    <!-- Vowels -->
    <p class="text-xs font-black uppercase tracking-widest text-stone-400 mb-3">Les voyelles (Harakat)</p>
    <div class="grid grid-cols-2 gap-3">
        <div class="card p-4 text-center"><p class="amiri text-3xl text-purple-400">Ø¨ÙŽ</p><p class="font-bold text-sm mt-1">Fatha</p><p class="text-xs text-stone-400">son "a" court</p></div>
        <div class="card p-4 text-center"><p class="amiri text-3xl text-purple-400">Ø¨Ù</p><p class="font-bold text-sm mt-1">Kasra</p><p class="text-xs text-stone-400">son "i" court</p></div>
        <div class="card p-4 text-center"><p class="amiri text-3xl text-purple-400">Ø¨Ù</p><p class="font-bold text-sm mt-1">Damma</p><p class="text-xs text-stone-400">son "ou" court</p></div>
        <div class="card p-4 text-center"><p class="amiri text-3xl text-purple-400">Ø¨Ù’</p><p class="font-bold text-sm mt-1">SukÃ»n</p><p class="text-xs text-stone-400">pas de voyelle</p></div>
        <div class="card p-4 text-center"><p class="amiri text-3xl text-purple-400">Ø¨Ù‘</p><p class="font-bold text-sm mt-1">Shadda</p><p class="text-xs text-stone-400">lettre doublÃ©e</p></div>
        <div class="card p-4 text-center"><p class="amiri text-3xl text-purple-400">Ø¨Ù‹</p><p class="font-bold text-sm mt-1">TanwÃ®n</p><p class="text-xs text-stone-400">terminaison -an/-in/-un</p></div>
    </div>
</div>

<!-- ===================== PROPHETS TAB ===================== -->
<div id="tab-prophets" class="hidden px-4 pb-nav">
    <div id="prophets-list-view">
        <header class="pt-12 pb-5">
            <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">ProphÃ¨tes ï·º</h1>
            <p class="text-stone-400 text-sm mt-1">Leurs histoires, leurs leÃ§ons</p>
        </header>
        <div class="grid grid-cols-2 gap-3" id="prophets-grid"></div>
    </div>
    <div id="prophet-detail" class="hidden pb-4">
        <button onclick="window.backToProphets()" class="flex items-center gap-2 text-rose-500 font-bold text-sm pt-10 mb-5">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
            Retour
        </button>
        <div class="card p-6 mb-4">
            <p class="text-5xl mb-3" id="prophet-emoji">ðŸŒ¿</p>
            <h2 class="playfair text-2xl font-bold" style="color:#3D2B2B" id="prophet-name-big">Adam</h2>
            <p class="text-rose-400 text-sm font-medium mt-1" id="prophet-sub"></p>
        </div>
        <div class="card p-6">
            <p class="text-stone-600 text-sm leading-relaxed whitespace-pre-wrap" id="prophet-story"></p>
        </div>
    </div>
</div>

<!-- ===================== ALLAH NAMES TAB ===================== -->
<div id="tab-allah" class="hidden px-4 pb-nav">
    <header class="pt-12 pb-5">
        <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">Noms d'Allah ðŸŒ¿</h1>
        <p class="text-stone-400 text-sm mt-1">Les 99 beaux noms Â· <span id="allah-count">0</span> noms</p>
    </header>

    <!-- Search -->
    <input oninput="window.filterAllahNames(this.value)" placeholder="ðŸ” Chercher un nom..." class="w-full rounded-2xl px-4 py-3 text-sm mb-4 outline-none border" style="background:white;border-color:#F0D8D8;color:#3D2B2B">

    <!-- Detail card -->
    <div id="aname-detail" class="hidden card p-5 mb-4" style="background:#FDF8F3;border-color:#E8C4C4">
        <p class="amiri text-4xl text-rose-500 text-center mb-2" id="aname-ar">Ø§Ù„Ø±Ø­Ù…Ù†</p>
        <p class="playfair text-xl font-bold text-center" style="color:#3D2B2B" id="aname-n">Ar-RahmÃ¢n</p>
        <p class="text-sm text-stone-400 text-center italic mb-3" id="aname-t">Le Tout-MisÃ©ricordieux</p>
        <p class="text-sm text-stone-500 leading-relaxed" id="aname-d"></p>
        <button onclick="document.getElementById('aname-detail').classList.add('hidden')" class="mt-3 w-full text-center text-stone-400 text-xs font-bold uppercase tracking-widest py-2">Fermer âœ•</button>
    </div>

    <div class="space-y-2" id="allah-names-list"></div>
</div>

<!-- ===================== FOUNDATIONS TAB ===================== -->
<div id="tab-foundations" class="hidden px-4 pb-nav">
    <header class="pt-12 pb-5">
        <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">Fondements ðŸ•‹</h1>
        <p class="text-stone-400 text-sm mt-1">Les bases de l'Islam</p>
    </header>

    <!-- Pilliers de l'Islam -->
    <h2 class="text-xs font-black uppercase tracking-widest text-rose-500 mb-3">Les 5 Piliers de l'Islam</h2>
    <div class="space-y-3 mb-6">
        <details class="card overflow-hidden group" open>
            <summary class="p-5 flex items-center gap-4 cursor-pointer list-none outline-none">
                <div class="w-10 h-10 rounded-2xl flex items-center justify-center font-black text-white flex-shrink-0 text-lg" style="background:linear-gradient(135deg,#E8A4A4,#C47A7A)">1</div>
                <div class="flex-1"><p class="font-bold text-base" style="color:#3D2B2B">La Shahada</p><p class="text-xs text-stone-400">La dÃ©claration de foi</p></div>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4 space-y-3" style="border-color:#F0E0D6">
                <div class="rounded-2xl p-4 text-center" style="background:#FDF8F3;border:1px solid #E8C4C4">
                    <p class="amiri text-2xl text-rose-500 leading-loose mb-2">Ø£ÙŽØ´Ù’Ù‡ÙŽØ¯Ù Ø£ÙŽÙ†Ù’ Ù„ÙŽØ§ Ø¥ÙÙ„ÙŽÙ°Ù‡ÙŽ Ø¥ÙÙ„ÙŽÙ‘Ø§ Ø§Ù„Ù„Ù‡Ù ÙˆÙŽØ£ÙŽØ´Ù’Ù‡ÙŽØ¯Ù Ø£ÙŽÙ†ÙŽÙ‘ Ù…ÙØ­ÙŽÙ…ÙŽÙ‘Ø¯Ù‹Ø§ Ø±ÙŽØ³ÙÙˆÙ„Ù Ø§Ù„Ù„Ù‡Ù</p>
                    <p class="text-xs text-stone-400 italic">Ashhadu an lÃ¢ ilÃ¢ha illallÃ¢h wa ashhadu anna Muhammadan RasÃ»lullÃ¢h</p>
                    <p class="text-sm font-medium text-stone-600 mt-2">"J'atteste qu'il n'y a de dieu qu'Allah, et j'atteste que Muhammad est Son Messager."</p>
                </div>
                <p class="text-sm text-stone-500 leading-relaxed">La Shahada est la porte d'entrÃ©e dans l'Islam. Ce n'est pas une simple phrase â€” c'est un contrat de vie entre toi et Allah.</p>
            </div>
        </details>

        <details class="card overflow-hidden group">
            <summary class="p-5 flex items-center gap-4 cursor-pointer list-none outline-none">
                <div class="w-10 h-10 rounded-2xl flex items-center justify-center font-black text-white flex-shrink-0 text-lg" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">2</div>
                <div class="flex-1"><p class="font-bold text-base" style="color:#3D2B2B">La SalÃ¢t â€” PriÃ¨re</p><p class="text-xs text-stone-400">5 priÃ¨res par jour</p></div>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4" style="border-color:#F0E0D6">
                <p class="text-sm text-stone-500 leading-relaxed mb-3">La priÃ¨re est le lien direct entre toi et Allah. 5 fois par jour, tu te rappelles de Lui et Il Se rappelle de toi.</p>
                <div class="grid grid-cols-5 gap-2 text-center">
                    <div class="bg-rose-50 rounded-xl p-2"><p class="text-lg">ðŸŒ…</p><p class="text-[10px] font-bold text-stone-500">Fajr</p></div>
                    <div class="bg-rose-50 rounded-xl p-2"><p class="text-lg">â˜€ï¸</p><p class="text-[10px] font-bold text-stone-500">Dohr</p></div>
                    <div class="bg-rose-50 rounded-xl p-2"><p class="text-lg">ðŸŒ¤ï¸</p><p class="text-[10px] font-bold text-stone-500">Asr</p></div>
                    <div class="bg-rose-50 rounded-xl p-2"><p class="text-lg">ðŸŒ†</p><p class="text-[10px] font-bold text-stone-500">Maghrib</p></div>
                    <div class="bg-rose-50 rounded-xl p-2"><p class="text-lg">ðŸŒ™</p><p class="text-[10px] font-bold text-stone-500">Isha</p></div>
                </div>
                <p class="text-xs text-stone-400 mt-3 italic">"Certes, la SalÃ¢t prÃ©serve de la turpitude et du blÃ¢mable." â€” Coran 29:45</p>
            </div>
        </details>

        <details class="card overflow-hidden group">
            <summary class="p-5 flex items-center gap-4 cursor-pointer list-none outline-none">
                <div class="w-10 h-10 rounded-2xl flex items-center justify-center font-black text-white flex-shrink-0 text-lg" style="background:linear-gradient(135deg,#FBCFE8,#EC4899)">3</div>
                <div class="flex-1"><p class="font-bold text-base" style="color:#3D2B2B">La ZakÃ¢t â€” AumÃ´ne</p><p class="text-xs text-stone-400">2,5% des Ã©conomies</p></div>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4" style="border-color:#F0E0D6">
                <p class="text-sm text-stone-500 leading-relaxed">La ZakÃ¢t purifie ta richesse et aide ceux dans le besoin. Elle rappelle que l'argent appartient Ã  Allah â€” tu en es un dÃ©positaire temporaire.</p>
                <p class="text-xs text-stone-400 mt-2 italic">"Prends de leurs biens une aumÃ´ne pour les purifier et les faire croÃ®tre." â€” Coran 9:103</p>
            </div>
        </details>

        <details class="card overflow-hidden group">
            <summary class="p-5 flex items-center gap-4 cursor-pointer list-none outline-none">
                <div class="w-10 h-10 rounded-2xl flex items-center justify-center font-black text-white flex-shrink-0 text-lg" style="background:linear-gradient(135deg,#FDE68A,#F59E0B)">4</div>
                <div class="flex-1"><p class="font-bold text-base" style="color:#3D2B2B">Le Sawm â€” JeÃ»ne</p><p class="text-xs text-stone-400">Ramadan Â· purification</p></div>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4" style="border-color:#F0E0D6">
                <p class="text-sm text-stone-500 leading-relaxed">Le jeÃ»ne du Ramadan est une Ã©cole de volontÃ©, d'empathie et de proximitÃ© avec Allah. Pas seulement s'abstenir de manger â€” maÃ®triser la langue, les pensÃ©es, les regards.</p>
                <p class="text-xs text-stone-400 mt-2 italic">"Le jeÃ»ne est pour Moi et c'est Moi qui en accorde la rÃ©compense." â€” Hadith Qudsi</p>
            </div>
        </details>

        <details class="card overflow-hidden group">
            <summary class="p-5 flex items-center gap-4 cursor-pointer list-none outline-none">
                <div class="w-10 h-10 rounded-2xl flex items-center justify-center font-black text-white flex-shrink-0 text-lg" style="background:linear-gradient(135deg,#6EE7B7,#059669)">5</div>
                <div class="flex-1"><p class="font-bold text-base" style="color:#3D2B2B">Le Hajj â€” PÃ¨lerinage</p><p class="text-xs text-stone-400">Une fois dans sa vie</p></div>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4" style="border-color:#F0E0D6">
                <p class="text-sm text-stone-500 leading-relaxed">Le Hajj est le plus grand rassemblement humain sur terre. Tous vÃªtus de blanc, sans distinction de rang. Un rappel de l'Ã©galitÃ© devant Allah et de la mort.</p>
                <p class="text-xs text-stone-400 mt-2 italic">"Et proclame parmi les hommes l'obligation du Hajj." â€” Coran 22:27</p>
            </div>
        </details>
    </div>

    <!-- Pilliers de la Foi -->
    <h2 class="text-xs font-black uppercase tracking-widest text-purple-500 mb-3">Les 6 Piliers de la Foi (Iman)</h2>
    <div class="space-y-2">
        <div class="card p-4 flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black flex-shrink-0" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">1</div>
            <div><p class="font-bold text-sm" style="color:#3D2B2B">Croire en Allah</p><p class="text-xs text-stone-400">L'Unique, sans associÃ©, crÃ©ateur de tout</p></div>
        </div>
        <div class="card p-4 flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black flex-shrink-0" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">2</div>
            <div><p class="font-bold text-sm" style="color:#3D2B2B">Croire aux Anges</p><p class="text-xs text-stone-400">CrÃ©Ã©s de lumiÃ¨re, ils exÃ©cutent les ordres d'Allah</p></div>
        </div>
        <div class="card p-4 flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black flex-shrink-0" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">3</div>
            <div><p class="font-bold text-sm" style="color:#3D2B2B">Croire aux Livres rÃ©vÃ©lÃ©s</p><p class="text-xs text-stone-400">Torah, Psaumes, Ã‰vangile, Coran</p></div>
        </div>
        <div class="card p-4 flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black flex-shrink-0" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">4</div>
            <div><p class="font-bold text-sm" style="color:#3D2B2B">Croire aux ProphÃ¨tes</p><p class="text-xs text-stone-400">De Adam Ã  Muhammad ï·º</p></div>
        </div>
        <div class="card p-4 flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black flex-shrink-0" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">5</div>
            <div><p class="font-bold text-sm" style="color:#3D2B2B">Croire au Jour Dernier</p><p class="text-xs text-stone-400">RÃ©surrection, jugement, paradis et enfer</p></div>
        </div>
        <div class="card p-4 flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black flex-shrink-0" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">6</div>
            <div><p class="font-bold text-sm" style="color:#3D2B2B">Croire au Destin (Al-Qadar)</p><p class="text-xs text-stone-400">Allah a dÃ©crÃ©tÃ© toute chose â€” bonne comme difficile</p></div>
        </div>
    </div>
</div>

<!-- ===================== DUAS TAB ===================== -->
<div id="tab-duas" class="hidden px-4 pb-nav">
    <header class="pt-12 pb-5">
        <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">Duas ðŸ¤²</h1>
        <p class="text-stone-400 text-sm mt-1">Invocations essentielles & tes duas perso</p>
    </header>

    <!-- Duas importantes -->
    <h2 class="text-xs font-black uppercase tracking-widest text-rose-500 mb-3">Duas fondamentales</h2>
    <div class="space-y-3 mb-6">
        <details class="card overflow-hidden group">
            <summary class="p-5 flex justify-between items-center cursor-pointer list-none outline-none">
                <p class="font-bold text-sm" style="color:#3D2B2B">ðŸ‹ Dua de YÃ»nus</p>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4 space-y-3" style="border-color:#F0E0D6">
                <p class="amiri text-2xl text-right text-rose-500 leading-loose">Ù„ÙŽÙ‘Ø§ Ø¥ÙÙ„ÙŽÙ°Ù‡ÙŽ Ø¥ÙÙ„ÙŽÙ‘Ø§ Ø£ÙŽÙ†ØªÙŽ Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽÙƒÙŽ Ø¥ÙÙ†ÙÙ‘ÙŠ ÙƒÙÙ†ØªÙ Ù…ÙÙ†ÙŽ Ø§Ù„Ø¸ÙŽÙ‘Ø§Ù„ÙÙ…ÙÙŠÙ†ÙŽ</p>
                <p class="text-xs text-stone-400 italic">LÃ¢ ilÃ¢ha illÃ¢ anta subhÃ¢naka innÃ® kuntu min adh-dhÃ¢limÃ®n</p>
                <p class="text-sm font-medium text-stone-600">"Il n'y a de dieu que Toi, Gloire Ã  Toi, j'ai Ã©tÃ© parmi les injustes."</p>
                <p class="text-xs text-purple-500">Dans les moments de dÃ©tresse. RÃ©citer 40 fois.</p>
            </div>
        </details>
        <details class="card overflow-hidden group">
            <summary class="p-5 flex justify-between items-center cursor-pointer list-none outline-none">
                <p class="font-bold text-sm" style="color:#3D2B2B">âœ¨ Dua Laylat al-Qadr</p>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4 space-y-3" style="border-color:#F0E0D6">
                <p class="amiri text-2xl text-right text-rose-500 leading-loose">Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙÙ…ÙŽÙ‘ Ø¥ÙÙ†ÙŽÙ‘ÙƒÙŽ Ø¹ÙŽÙÙÙˆÙŒÙ‘ ØªÙØ­ÙØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙŽÙÙ’ÙˆÙŽ ÙÙŽØ§Ø¹Ù’ÙÙ Ø¹ÙŽÙ†ÙÙ‘ÙŠ</p>
                <p class="text-xs text-stone-400 italic">AllÃ¢humma innaka 'afuwwun tuhibb al-'afw fa'fu 'annÃ®</p>
                <p class="text-sm font-medium text-stone-600">"Ã” Allah, Tu es l'Indulgent, Tu aimes l'indulgence, sois indulgent envers moi."</p>
                <p class="text-xs text-purple-500">RecommandÃ©e par le ProphÃ¨te ï·º Ã  Aisha pour Laylat al-Qadr.</p>
            </div>
        </details>
        <details class="card overflow-hidden group">
            <summary class="p-5 flex justify-between items-center cursor-pointer list-none outline-none">
                <p class="font-bold text-sm" style="color:#3D2B2B">ðŸŒŠ Dua de l'anxiÃ©tÃ©</p>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4 space-y-3" style="border-color:#F0E0D6">
                <p class="amiri text-2xl text-right text-rose-500 leading-loose">Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙÙ…ÙŽÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙŽØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙŽ Ù…ÙÙ†ÙŽ Ø§Ù„Ù’Ù‡ÙŽÙ…ÙÙ‘ ÙˆÙŽØ§Ù„Ù’Ø­ÙŽØ²ÙŽÙ†Ù</p>
                <p class="text-xs text-stone-400 italic">AllÃ¢humma innÃ® a'Ã»dhu bika min al-hamm wal-hazan</p>
                <p class="text-sm font-medium text-stone-600">"Ã” Allah, je cherche refuge en Toi contre l'inquiÃ©tude et la tristesse."</p>
                <p class="text-xs text-purple-500">Quand le cÅ“ur est lourd. RÃ©citer 7 fois.</p>
            </div>
        </details>
        <details class="card overflow-hidden group">
            <summary class="p-5 flex justify-between items-center cursor-pointer list-none outline-none">
                <p class="font-bold text-sm" style="color:#3D2B2B">ðŸ“š Pour le savoir utile</p>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4 space-y-3" style="border-color:#F0E0D6">
                <p class="amiri text-2xl text-right text-rose-500 leading-loose">Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙÙ…ÙŽÙ‘ Ø§Ù†Ù’ÙÙŽØ¹Ù’Ù†ÙÙŠ Ø¨ÙÙ…ÙŽØ§ Ø¹ÙŽÙ„ÙŽÙ‘Ù…Ù’ØªÙŽÙ†ÙÙŠ ÙˆÙŽØ¹ÙŽÙ„ÙÙ‘Ù…Ù’Ù†ÙÙŠ Ù…ÙŽØ§ ÙŠÙŽÙ†Ù’ÙÙŽØ¹ÙÙ†ÙÙŠ</p>
                <p class="text-xs text-stone-400 italic">AllÃ¢humma anfa'nÃ® bimÃ¢ 'allamtanÃ® wa 'allimnÃ® mÃ¢ yanfa'unÃ®</p>
                <p class="text-sm font-medium text-stone-600">"Ã” Allah, fais-moi profiter de ce que Tu m'as enseignÃ©, et enseigne-moi ce qui m'est utile."</p>
                <p class="text-xs text-purple-500">Avant de lire le Coran ou de s'entraÃ®ner Ã  l'arabe.</p>
            </div>
        </details>
    </div>

    <!-- Duas personnelles -->
    <div class="card p-5 mb-4">
        <h2 class="text-xs font-black uppercase tracking-widest text-purple-500 mb-4">Mes duas personnelles ðŸŒ¸</h2>
        <input id="dua-title-inp" placeholder="Titre (ex: Pour ma famille...)" class="w-full rounded-xl px-4 py-3 text-sm outline-none mb-2 border" style="background:#FDF8F3;border-color:#F0D8D8;color:#3D2B2B">
        <textarea id="dua-text-inp" rows="3" placeholder="Ta dua, dans tes mots..." class="w-full rounded-xl px-4 py-3 text-sm outline-none mb-3 resize-none border" style="background:#FDF8F3;border-color:#F0D8D8;color:#3D2B2B"></textarea>
        <button onclick="window.addDua()" class="rose-btn w-full py-3 text-sm active:scale-95 transition-all">Sauvegarder ma dua ðŸ¤²</button>
    </div>
    <div id="personal-duas-list" class="space-y-3">
        <p class="text-stone-400 italic text-sm text-center py-6">Tes duas personnelles s'afficheront ici ðŸ¤²</p>
    </div>
</div>

<!-- ===================== BOTTOM NAV ===================== -->
<nav class="fixed bottom-0 left-0 right-0 z-50 border-t overflow-x-auto no-scrollbar" style="background:rgba(253,248,243,0.95);border-color:#F0D8D8;backdrop-filter:blur(20px)">
    <div class="flex justify-between items-center py-2 px-1 min-w-max mx-auto" style="gap:4px">
        <button id="nav-home" onclick="window.showTab('home')" class="active-nav flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">Accueil</span>
        </button>
        <button id="nav-train" onclick="window.showTab('train')" class="flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">FluiditÃ©</span>
        </button>
        <button id="nav-arabic" onclick="window.showTab('arabic')" class="flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">Arabe</span>
        </button>
        <button id="nav-prophets" onclick="window.showTab('prophets')" class="flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="5"></circle><path d="M20 21a8 8 0 0 0-16 0"></path></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">ProphÃ¨tes</span>
        </button>
        <button id="nav-allah" onclick="window.showTab('allah')" class="flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"></path><path d="M12 8v4l3 3"></path></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">99 Noms</span>
        </button>
        <button id="nav-foundations" onclick="window.showTab('foundations')" class="flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">Bases</span>
        </button>
        <button id="nav-duas" onclick="window.showTab('duas')" class="flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"></path><path d="m9 13 2 2 4-4"></path></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">Duas</span>
        </button>
    </div>
</nav>

</div>

<script>
// Fix: populate train surah selector after module loads
setTimeout(() => {
    const grid = document.querySelector('#surah-selector .grid');
    if (grid && window.SURAHS && grid.children.length <= 1) {
        grid.innerHTML = window.SURAHS.map(s =>
            `<button onclick="window.startSession('${s.id}')" class="card p-4 text-left active:scale-95 transition-all">
                <span class="text-xl block mb-2">${s.emoji}</span>
                <p class="font-bold text-sm" style="color:#3D2B2B">${s.name}</p>
                <p class="text-xs text-stone-400">${s.verses.length}v Â· ${'â­'.repeat(s.level)}</p>
            </button>`
        ).join('');
    }
}, 1500);
</script>
</body>
</html>
