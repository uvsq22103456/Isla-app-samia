<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Samia ‚Äî Deen & Arabe üå∏</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital,wght@0,500;0,700;1,500&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --cream: #FDF8F3;
            --blush: #F9EEE8;
            --rose: #E8A4A4;
            --rose-dark: #C47A7A;
            --mauve: #B39DDB;
            --mauve-light: #EDE7F6;
            --sand: #D4B896;
            --text: #3D2B2B;
            --text-soft: #7A5C5C;
            --text-muted: #B08080;
            --card-bg: #FFFFFF;
            --border: #F0E0D6;
        }
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--cream);
            background-image:
                radial-gradient(ellipse 80% 50% at 20% 0%, rgba(232,164,164,0.15) 0%, transparent 60%),
                radial-gradient(ellipse 60% 40% at 80% 100%, rgba(179,157,219,0.12) 0%, transparent 60%);
            color: var(--text);
            min-height: 100vh;
            overscroll-behavior-y: contain;
        }
        .amiri { font-family: 'Amiri', serif; }
        .playfair { font-family: 'Playfair Display', serif; }
        .card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 20px;
            box-shadow: 0 2px 12px rgba(196,122,122,0.06);
        }
        .card-soft {
            background: var(--blush);
            border: 1px solid var(--border);
            border-radius: 20px;
        }
        .rose-btn {
            background: linear-gradient(135deg, #E8A4A4, #C47A7A);
            color: white;
            border-radius: 16px;
            font-weight: 700;
            box-shadow: 0 4px 16px rgba(196,122,122,0.3);
        }
        .mauve-btn {
            background: linear-gradient(135deg, #C5B3E8, #9C7FD4);
            color: white;
            border-radius: 16px;
            font-weight: 700;
            box-shadow: 0 4px 16px rgba(156,127,212,0.25);
        }
        .pb-nav { padding-bottom: 7rem; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        input, textarea { font-size: 16px !important; }
        details summary::-webkit-details-marker { display: none; }

        .active-nav .nav-icon { color: #C47A7A; }
        .active-nav .nav-label { color: #C47A7A; }

        /* Toast */
        .toast-anim { animation: toastIn 0.3s ease; }
        @keyframes toastIn { from { opacity:0; transform: translate(-50%,-10px); } to { opacity:1; transform: translate(-50%,0); } }

        /* Fade */
        @keyframes fadeUp { from { opacity:0; transform:translateY(16px); } to { opacity:1; transform:translateY(0); } }
        .fade-up { animation: fadeUp 0.4s ease both; }

        /* Rating buttons */
        .rating-btn { transition: all 0.15s ease; border: 1.5px solid var(--border); }
        #rate-easy.sel { background: #DCFCE7; border-color: #86EFAC; }
        #rate-medium.sel { background: #FEF9C3; border-color: #FDE047; }
        #rate-hard.sel { background: #FEE2E2; border-color: #FCA5A5; }

        /* Pill nav */
        .pill-btn {
            flex-shrink: 0;
            padding: 8px 16px;
            border-radius: 999px;
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            transition: all 0.2s;
        }
        .pill-active { background: linear-gradient(135deg, #E8A4A4, #C47A7A); color: white; box-shadow: 0 3px 10px rgba(196,122,122,0.3); }
        .pill-inactive { background: white; color: var(--text-muted); border: 1px solid var(--border); }

        /* Letter grid button */
        .letter-btn {
            background: white;
            border: 1.5px solid var(--border);
            border-radius: 14px;
            padding: 14px 8px;
            text-align: center;
            transition: all 0.15s;
            cursor: pointer;
        }
        .letter-btn:active { transform: scale(0.95); }
        .letter-btn.active-letter {
            background: linear-gradient(135deg, #F9EEE8, #F0D8D8);
            border-color: #E8A4A4;
        }

        /* Prophet detail anim */
        #prophet-detail { animation: fadeUp 0.3s ease; }
    </style>

    <script>
        // ============ DATA ‚Äî localStorage, 100% local, instantan√© ============
        let userData = {};
        let sessions = [];
        let scores = {};
        let personalDuas = [];

        const LS = 'samia-deen-v1';

        function loadAll() {
            try {
                const raw = localStorage.getItem(LS);
                if (raw) {
                    const d = JSON.parse(raw);
                    sessions = d.sessions || [];
                    scores = d.scores || {};
                    personalDuas = d.personalDuas || [];
                    userData = { streak: d.streak||0, lastSession: d.lastSession||null };
                }
            } catch(e) {}
        }

        function saveMain() {
            try {
                const existing = JSON.parse(localStorage.getItem(LS)||'{}');
                localStorage.setItem(LS, JSON.stringify({
                    ...existing, sessions, scores,
                    streak: userData.streak||0,
                    lastSession: userData.lastSession||null
                }));
            } catch(e) {}
        }

        function saveDuas() {
            try {
                const existing = JSON.parse(localStorage.getItem(LS)||'{}');
                localStorage.setItem(LS, JSON.stringify({ ...existing, personalDuas }));
            } catch(e) {}
        }

        // ============ SURAHS DATA ============
        const SURAHS = [
            { id:'fatiha', name:'Al-Fatiha', nameAr:'ÿßŸÑŸÅÿßÿ™ÿ≠ÿ©', level:1, emoji:'üåü', tip:'La plus r√©cit√©e dans la pri√®re. Chaque lettre doit √™tre claire.',
              verses:[
                {n:1,ar:'ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê',tr:'Au nom d'Allah, le Tout Mis√©ricordieux, le Tr√®s Mis√©ricordieux'},
                {n:2,ar:'ÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸê ÿ±Ÿéÿ®ŸêŸë ÿßŸÑŸíÿπŸéÿßŸÑŸéŸÖŸêŸäŸÜŸé',tr:'Louange √† Allah, Seigneur des mondes'},
                {n:3,ar:'ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê',tr:'Le Tout Mis√©ricordieux, le Tr√®s Mis√©ricordieux'},
                {n:4,ar:'ŸÖŸéÿßŸÑŸêŸÉŸê ŸäŸéŸàŸíŸÖŸê ÿßŸÑÿØŸêŸëŸäŸÜŸê',tr:'Ma√Ætre du Jour de la r√©tribution'},
                {n:5,ar:'ÿ•ŸêŸäŸéŸëÿßŸÉŸé ŸÜŸéÿπŸíÿ®ŸèÿØŸè ŸàŸéÿ•ŸêŸäŸéŸëÿßŸÉŸé ŸÜŸéÿ≥Ÿíÿ™ŸéÿπŸêŸäŸÜŸè',tr:'C'est Toi que nous adorons, et c'est Toi dont nous implorons le secours'},
                {n:6,ar:'ÿßŸáŸíÿØŸêŸÜŸéÿß ÿßŸÑÿµŸêŸëÿ±Ÿéÿßÿ∑Ÿé ÿßŸÑŸíŸÖŸèÿ≥Ÿíÿ™ŸéŸÇŸêŸäŸÖŸé',tr:'Guide-nous dans le droit chemin'},
                {n:7,ar:'ÿµŸêÿ±Ÿéÿßÿ∑Ÿé ÿßŸÑŸéŸëÿ∞ŸêŸäŸÜŸé ÿ£ŸéŸÜŸíÿπŸéŸÖŸíÿ™Ÿé ÿπŸéŸÑŸéŸäŸíŸáŸêŸÖŸí ÿ∫ŸéŸäŸíÿ±Ÿê ÿßŸÑŸíŸÖŸéÿ∫Ÿíÿ∂ŸèŸàÿ®Ÿê ÿπŸéŸÑŸéŸäŸíŸáŸêŸÖŸí ŸàŸéŸÑŸéÿß ÿßŸÑÿ∂ŸéŸëÿßŸÑŸêŸëŸäŸÜŸé',tr:'Le chemin de ceux que Tu as combl√©s de bienfaits, non pas de ceux qui ont encouru Ta col√®re, ni des √©gar√©s'},
              ]},
            { id:'ikhlas', name:'Al-Ikhlas', nameAr:'ÿßŸÑÿ•ÿÆŸÑÿßÿµ', level:1, emoji:'üíé', tip:'Vaut 1/3 du Coran. Chaque mot compte.',
              verses:[
                {n:1,ar:'ŸÇŸèŸÑŸí ŸáŸèŸàŸé ÿßŸÑŸÑŸéŸëŸáŸè ÿ£Ÿéÿ≠ŸéÿØŸå',tr:'Dis : ¬´Il est Allah, l'Unique¬ª'},
                {n:2,ar:'ÿßŸÑŸÑŸéŸëŸáŸè ÿßŸÑÿµŸéŸëŸÖŸéÿØŸè',tr:'Allah, le Seul √† √™tre implor√© pour ce que nous d√©sirons'},
                {n:3,ar:'ŸÑŸéŸÖŸí ŸäŸéŸÑŸêÿØŸí ŸàŸéŸÑŸéŸÖŸí ŸäŸèŸàŸÑŸéÿØŸí',tr:'Il n'a pas engendr√©, n'a pas √©t√© engendr√© non plus'},
                {n:4,ar:'ŸàŸéŸÑŸéŸÖŸí ŸäŸéŸÉŸèŸÜ ŸÑŸéŸëŸáŸè ŸÉŸèŸÅŸèŸàŸãÿß ÿ£Ÿéÿ≠ŸéÿØŸå',tr:'Et nul n'est √©gal √† Lui'},
              ]},
            { id:'falaq', name:'Al-Falaq', nameAr:'ÿßŸÑŸÅŸÑŸÇ', level:1, emoji:'üåÖ', tip:'Sourate de protection. √Ä lire avec clart√©.',
              verses:[
                {n:1,ar:'ŸÇŸèŸÑŸí ÿ£ŸéÿπŸèŸàÿ∞Ÿè ÿ®Ÿêÿ±Ÿéÿ®ŸêŸë ÿßŸÑŸíŸÅŸéŸÑŸéŸÇŸê',tr:'Dis : ¬´Je cherche protection aupr√®s du Seigneur de l'Aube naissante¬ª'},
                {n:2,ar:'ŸÖŸêŸÜ ÿ¥Ÿéÿ±ŸêŸë ŸÖŸéÿß ÿÆŸéŸÑŸéŸÇŸé',tr:'contre le mal de ce qu'Il a cr√©√©'},
                {n:3,ar:'ŸàŸéŸÖŸêŸÜ ÿ¥Ÿéÿ±ŸêŸë ÿ∫Ÿéÿßÿ≥ŸêŸÇŸç ÿ•Ÿêÿ∞Ÿéÿß ŸàŸéŸÇŸéÿ®Ÿé',tr:'et contre le mal de l'obscurit√© quand elle s'installe'},
                {n:4,ar:'ŸàŸéŸÖŸêŸÜ ÿ¥Ÿéÿ±ŸêŸë ÿßŸÑŸÜŸéŸëŸÅŸéŸëÿßÿ´Ÿéÿßÿ™Ÿê ŸÅŸêŸä ÿßŸÑŸíÿπŸèŸÇŸéÿØŸê',tr:'et contre le mal de celles qui soufflent sur les n≈ìuds'},
                {n:5,ar:'ŸàŸéŸÖŸêŸÜ ÿ¥Ÿéÿ±ŸêŸë ÿ≠Ÿéÿßÿ≥ŸêÿØŸç ÿ•Ÿêÿ∞Ÿéÿß ÿ≠Ÿéÿ≥ŸéÿØŸé',tr:'et contre le mal de l'envieux quand il envie'},
              ]},
            { id:'nas', name:'An-Nas', nameAr:'ÿßŸÑŸÜÿßÿ≥', level:1, emoji:'üõ°Ô∏è', tip:'√Ä r√©citer le soir pour la protection.',
              verses:[
                {n:1,ar:'ŸÇŸèŸÑŸí ÿ£ŸéÿπŸèŸàÿ∞Ÿè ÿ®Ÿêÿ±Ÿéÿ®ŸêŸë ÿßŸÑŸÜŸéŸëÿßÿ≥Ÿê',tr:'Dis : ¬´Je cherche protection aupr√®s du Seigneur des hommes¬ª'},
                {n:2,ar:'ŸÖŸéŸÑŸêŸÉŸê ÿßŸÑŸÜŸéŸëÿßÿ≥Ÿê',tr:'du Roi des hommes'},
                {n:3,ar:'ÿ•ŸêŸÑŸéŸ∞ŸáŸê ÿßŸÑŸÜŸéŸëÿßÿ≥Ÿê',tr:'de Dieu des hommes'},
                {n:4,ar:'ŸÖŸêŸÜ ÿ¥Ÿéÿ±ŸêŸë ÿßŸÑŸíŸàŸéÿ≥ŸíŸàŸéÿßÿ≥Ÿê ÿßŸÑŸíÿÆŸéŸÜŸéŸëÿßÿ≥Ÿê',tr:'contre le mal du mauvais conseiller furtif'},
                {n:5,ar:'ÿßŸÑŸéŸëÿ∞ŸêŸä ŸäŸèŸàŸéÿ≥ŸíŸàŸêÿ≥Ÿè ŸÅŸêŸä ÿµŸèÿØŸèŸàÿ±Ÿê ÿßŸÑŸÜŸéŸëÿßÿ≥Ÿê',tr:'qui souffle le mal dans les poitrines des hommes'},
                {n:6,ar:'ŸÖŸêŸÜŸé ÿßŸÑŸíÿ¨ŸêŸÜŸéŸëÿ©Ÿê ŸàŸéÿßŸÑŸÜŸéŸëÿßÿ≥Ÿê',tr:'qu'il soit djinn ou √™tre humain'},
              ]},
            { id:'asr', name:'Al-Asr', nameAr:'ÿßŸÑÿπÿµÿ±', level:1, emoji:'‚è≥', tip:'Imam Ash-Shafi'i : si le Coran n'avait que cette sourate, elle suffirait.',
              verses:[
                {n:1,ar:'ŸàŸéÿßŸÑŸíÿπŸéÿµŸíÿ±Ÿê',tr:'Par le Temps !'},
                {n:2,ar:'ÿ•ŸêŸÜŸéŸë ÿßŸÑŸíÿ•ŸêŸÜÿ≥ŸéÿßŸÜŸé ŸÑŸéŸÅŸêŸä ÿÆŸèÿ≥Ÿíÿ±Ÿç',tr:'Certes, l'√™tre humain est en perdition'},
                {n:3,ar:'ÿ•ŸêŸÑŸéŸëÿß ÿßŸÑŸéŸëÿ∞ŸêŸäŸÜŸé ÿ¢ŸÖŸéŸÜŸèŸàÿß ŸàŸéÿπŸéŸÖŸêŸÑŸèŸàÿß ÿßŸÑÿµŸéŸëÿßŸÑŸêÿ≠Ÿéÿßÿ™Ÿê ŸàŸéÿ™ŸéŸàŸéÿßÿµŸéŸàŸíÿß ÿ®ŸêÿßŸÑŸíÿ≠ŸéŸÇŸêŸë ŸàŸéÿ™ŸéŸàŸéÿßÿµŸéŸàŸíÿß ÿ®ŸêÿßŸÑÿµŸéŸëÿ®Ÿíÿ±Ÿê',tr:'sauf ceux qui croient et accomplissent les bonnes ≈ìuvres, s'enjoignent mutuellement la v√©rit√© et l'endurance'},
              ]},
            { id:'kawthar', name:'Al-Kawthar', nameAr:'ÿßŸÑŸÉŸàÿ´ÿ±', level:1, emoji:'üåä', tip:'La plus courte sourate. Travaille l'emphase.',
              verses:[
                {n:1,ar:'ÿ•ŸêŸÜŸéŸëÿß ÿ£ŸéÿπŸíÿ∑ŸéŸäŸíŸÜŸéÿßŸÉŸé ÿßŸÑŸíŸÉŸéŸàŸíÿ´Ÿéÿ±Ÿé',tr:'Nous t'avons certes donn√© l'abondance'},
                {n:2,ar:'ŸÅŸéÿµŸéŸÑŸêŸë ŸÑŸêÿ±Ÿéÿ®ŸêŸëŸÉŸé ŸàŸéÿßŸÜŸíÿ≠Ÿéÿ±Ÿí',tr:'Accomplis donc la pri√®re pour ton Seigneur et sacrifie'},
                {n:3,ar:'ÿ•ŸêŸÜŸéŸë ÿ¥ŸéÿßŸÜŸêÿ¶ŸéŸÉŸé ŸáŸèŸàŸé ÿßŸÑŸíÿ£Ÿéÿ®Ÿíÿ™Ÿéÿ±Ÿè',tr:'C'est bien ton ennemi qui sera sans post√©rit√©'},
              ]},
            { id:'feel', name:'Al-Fil', nameAr:'ÿßŸÑŸÅŸäŸÑ', level:2, emoji:'üêò', tip:'Attention aux lettres prolong√©es et aux gunnah.',
              verses:[
                {n:1,ar:'ÿ£ŸéŸÑŸéŸÖŸí ÿ™Ÿéÿ±Ÿé ŸÉŸéŸäŸíŸÅŸé ŸÅŸéÿπŸéŸÑŸé ÿ±Ÿéÿ®ŸèŸëŸÉŸé ÿ®Ÿêÿ£ŸéÿµŸíÿ≠Ÿéÿßÿ®Ÿê ÿßŸÑŸíŸÅŸêŸäŸÑŸê',tr:'N'as-tu pas vu comment ton Seigneur a agi envers les gens de l'√©l√©phant?'},
                {n:2,ar:'ÿ£ŸéŸÑŸéŸÖŸí ŸäŸéÿ¨ŸíÿπŸéŸÑŸí ŸÉŸéŸäŸíÿØŸéŸáŸèŸÖŸí ŸÅŸêŸä ÿ™Ÿéÿ∂ŸíŸÑŸêŸäŸÑŸç',tr:'N'a-t-Il pas rendu vains leurs stratag√®mes?'},
                {n:3,ar:'ŸàŸéÿ£Ÿéÿ±Ÿíÿ≥ŸéŸÑŸé ÿπŸéŸÑŸéŸäŸíŸáŸêŸÖŸí ÿ∑ŸéŸäŸíÿ±Ÿãÿß ÿ£Ÿéÿ®Ÿéÿßÿ®ŸêŸäŸÑŸé',tr:'Il envoya contre eux des oiseaux par vol√©es'},
                {n:4,ar:'ÿ™Ÿéÿ±ŸíŸÖŸêŸäŸáŸêŸÖ ÿ®Ÿêÿ≠Ÿêÿ¨Ÿéÿßÿ±Ÿéÿ©Ÿç ŸÖŸêŸëŸÜ ÿ≥Ÿêÿ¨ŸêŸëŸäŸÑŸç',tr:'qui lanc√®rent sur eux des pierres d'argile'},
                {n:5,ar:'ŸÅŸéÿ¨ŸéÿπŸéŸÑŸéŸáŸèŸÖŸí ŸÉŸéÿπŸéÿµŸíŸÅŸç ŸÖŸéŸëÿ£ŸíŸÉŸèŸàŸÑŸç',tr:'et Il les rendit pareils √† une paille m√¢ch√©e'},
              ]},
            { id:'zilzal', name:'Az-Zalzala', nameAr:'ÿßŸÑÿ≤ŸÑÿ≤ŸÑÿ©', level:2, emoji:'‚ö°', tip:'Entra√Æne-toi √† lire sans t'arr√™ter.',
              verses:[
                {n:1,ar:'ÿ•Ÿêÿ∞Ÿéÿß ÿ≤ŸèŸÑŸíÿ≤ŸêŸÑŸéÿ™Ÿê ÿßŸÑŸíÿ£Ÿéÿ±Ÿíÿ∂Ÿè ÿ≤ŸêŸÑŸíÿ≤ŸéÿßŸÑŸéŸáŸéÿß',tr:'Quand la terre tremblera de son violent tremblement'},
                {n:2,ar:'ŸàŸéÿ£ŸéÿÆŸíÿ±Ÿéÿ¨Ÿéÿ™Ÿê ÿßŸÑŸíÿ£Ÿéÿ±Ÿíÿ∂Ÿè ÿ£Ÿéÿ´ŸíŸÇŸéÿßŸÑŸéŸáŸéÿß',tr:'et que la terre sortira ses fardeaux'},
                {n:3,ar:'ŸàŸéŸÇŸéÿßŸÑŸé ÿßŸÑŸíÿ•ŸêŸÜÿ≥ŸéÿßŸÜŸè ŸÖŸéÿß ŸÑŸéŸáŸéÿß',tr:'et que l'√™tre humain dira : ¬´Qu'a-t-elle?¬ª'},
                {n:4,ar:'ŸäŸéŸàŸíŸÖŸéÿ¶Ÿêÿ∞Ÿç ÿ™Ÿèÿ≠ŸéÿØŸêŸëÿ´Ÿè ÿ£ŸéÿÆŸíÿ®Ÿéÿßÿ±ŸéŸáŸéÿß',tr:'Ce jour-l√†, elle racontera ses nouvelles'},
                {n:5,ar:'ÿ®Ÿêÿ£ŸéŸÜŸéŸë ÿ±Ÿéÿ®ŸéŸëŸÉŸé ÿ£ŸéŸàŸíÿ≠ŸéŸâŸ∞ ŸÑŸéŸáŸéÿß',tr:'parce que ton Seigneur lui en aura donn√© l'ordre'},
                {n:6,ar:'ŸäŸéŸàŸíŸÖŸéÿ¶Ÿêÿ∞Ÿç ŸäŸéÿµŸíÿØŸèÿ±Ÿè ÿßŸÑŸÜŸéŸëÿßÿ≥Ÿè ÿ£Ÿéÿ¥Ÿíÿ™Ÿéÿßÿ™Ÿãÿß ŸÑŸêŸëŸäŸèÿ±ŸéŸàŸíÿß ÿ£ŸéÿπŸíŸÖŸéÿßŸÑŸéŸáŸèŸÖŸí',tr:'Ce jour-l√†, les gens sortiront en groupes dispers√©s pour qu'on leur montre leurs ≈ìuvres'},
                {n:7,ar:'ŸÅŸéŸÖŸéŸÜ ŸäŸéÿπŸíŸÖŸéŸÑŸí ŸÖŸêÿ´ŸíŸÇŸéÿßŸÑŸé ÿ∞Ÿéÿ±ŸéŸëÿ©Ÿç ÿÆŸéŸäŸíÿ±Ÿãÿß ŸäŸéÿ±ŸéŸáŸè',tr:'Quiconque aura fait le poids d'un atome de bien le verra'},
                {n:8,ar:'ŸàŸéŸÖŸéŸÜ ŸäŸéÿπŸíŸÖŸéŸÑŸí ŸÖŸêÿ´ŸíŸÇŸéÿßŸÑŸé ÿ∞Ÿéÿ±ŸéŸëÿ©Ÿç ÿ¥Ÿéÿ±ŸãŸëÿß ŸäŸéÿ±ŸéŸáŸè',tr:'et quiconque aura fait le poids d'un atome de mal le verra'},
              ]},
        ];

        // ============ PROPHETS ============
        const PROPHETS = [
            {name:"Adam Ô∑∫",sub:"Le premier homme et proph√®te",emoji:"üåø",story:`Adam est le premier √™tre humain et le premier proph√®te. Allah l'a cr√©√© de la terre, lui a insuffl√© Son souffle et lui a enseign√© les noms de toutes choses.\n\nIl vivait au Paradis avec √àve (Hawwa), mais le Shayt√¢n les a tromp√©s. Allah leur a pardonn√© apr√®s leur repentir sinc√®re, et les a envoy√©s sur terre comme Ses repr√©sentants.\n\nüìø Le√ßon : Allah pardonne toujours √† celui qui se repent sinc√®rement. Le repentir d'Adam est le mod√®le de l'istighfar.`},
            {name:"N√ªh Ô∑∫",sub:"950 ans de da'wa, le D√©luge",emoji:"üö¢",story:`N√ªh a pr√™ch√© son peuple pendant 950 ans ‚Äî une patience extraordinaire. Son peuple adorait des idoles et refusait obstin√©ment de l'√©couter.\n\nIl construisit l'Arche par ordre divin. Le Grand D√©luge tout submergea. M√™me son fils refusa de monter, croyant qu'une montagne le prot√©gerait.\n\nüìø Le√ßon : La guidance appartient √† Allah seul. M√™me les proph√®tes ne peuvent pas guider ceux qu'Allah n'a pas guid√©s.`},
            {name:"Ibr√¢h√Æm Ô∑∫",sub:"Khal√Æl Allah ‚Äî L'ami intime d'Allah",emoji:"üî•",story:`Ibrahim est appel√© "p√®re des proph√®tes". D√®s l'enfance sa raison l'a conduit vers l'Unique. Il brisa les idoles de son peuple, fut jet√© dans un feu ardent, mais Allah ordonna au feu : "Sois fra√Æcheur et paix"\n\nL'√©preuve supr√™me : Allah lui ordonna de sacrifier son fils Isma√Øl. Tous deux accept√®rent ‚Äî Allah rempla√ßa Isma√Øl par un b√©lier. Avec Isma√Øl, il b√¢tit la Ka'ba.\n\nüìø Le√ßon : La soumission totale √† Allah est illustr√©e par Ibrahim dans chaque √©tape de sa vie.`},
            {name:"Y√ªsuf Ô∑∫",sub:"La plus belle des histoires",emoji:"üí´",story:`Y√ªsuf est fils de Ya'q√ªb. Ses fr√®res jaloux le jet√®rent dans un puits, puis le vendirent comme esclave en √âgypte. La femme de son ma√Ætre l'accusa faussement ‚Äî il fut emprisonn√©.\n\nQuand le roi d'√âgypte fit un r√™ve troublant, Y√ªsuf l'interpr√©ta et fut nomm√© ministre des finances. Ses fr√®res vinrent chercher du grain sans le reconna√Ætre. Il se r√©v√©la √† eux. Son p√®re retrouva la vue.\n\nüìø Le√ßon : Patience, chastet√©, confiance en Allah ‚Äî les pires √©preuves deviennent √©l√©vation.`},
            {name:"M√ªs√¢ Ô∑∫",sub:"Kal√Æm Allah ‚Äî √Ä qui Allah a parl√© directement",emoji:"‚ö°",story:`M√ªs√¢ est le proph√®te le plus mentionn√© dans le Coran. Il grandit dans le palais de Pharaon lui-m√™me. Sur le mont Sina√Ø, Allah lui parla directement depuis un buisson ardent.\n\nAvec H√¢r√ªn, il affronta Pharaon. Les 9 miracles s'encha√Ænent. Pharaon s'ent√™te. La mer se fend. Pharaon se noie au moment de dire "Je crois" ‚Äî trop tard.\n\nüìø Le√ßon : La mission proph√©tique est difficile, mais Allah est avec Ses √©lus.`},
            {name:"D√¢w√ªd Ô∑∫",sub:"Roi, proph√®te, psalmiste",emoji:"üéµ",story:`D√¢w√ªd √©tait un jeune berger quand il tua le g√©ant Jal√ªt d'une seule fronde. Allah lui donna le royaume et la sagesse.\n\nIl re√ßut les Zab√ªr (Psaumes). Sa voix √©tait si belle que les oiseaux et les montagnes participaient √† ses louanges. Allah lui apprit √† forger le fer.\n\nüìø Le√ßon : Combiner la foi, la comp√©tence et la gratitude. D√¢w√ªd √©tait roi mais restait profond√©ment humble devant Allah.`},
            {name:"Sulaym√¢n Ô∑∫",sub:"Ma√Ætre des djinns, des hommes et des animaux",emoji:"üëë",story:`Sulaym√¢n comprenait le langage des animaux et commandait les djinns. Il re√ßut un message de la huppe sur une reine (Bilq√Æs de Saba) qui adorait le soleil. Il l'invita √† l'Islam ‚Äî elle embrassa la foi.\n\nQuand il mourut appuy√© sur son b√¢ton, les djinns continu√®rent √† travailler sans savoir qu'il √©tait mort.\n\nüìø Le√ßon : Le pouvoir et la richesse ne valent rien sans la reconnaissance d'Allah.`},
            {name:"Y√ªnus Ô∑∫",sub:"L'homme de la baleine",emoji:"üêã",story:`Y√ªnus fut envoy√© √† la ville de Ninive. D√©courag√© par le refus de son peuple, il quitta sa mission sans autorisation divine. Il fut aval√© par un grand poisson.\n\nDans les t√©n√®bres il invoqua : "Il n'y a de dieu que Toi, Gloire √† Toi, j'ai √©t√© parmi les injustes." ‚Äî la dua Y√ªnus, l'une des plus puissantes. Allah l'exau√ßa.\n\nüìø Le√ßon : M√™me dans les pires moments, la dua sinc√®re dans les t√©n√®bres nous sauve.`},
            {name:"Maryam Ô∑ª",sub:"La meilleure des femmes ‚Äî m√®re d'Issa",emoji:"üå∏",story:`Maryam est la seule femme cit√©e par son nom dans le Coran, et une sourate enti√®re lui est d√©di√©e. Elle consacra sa vie √† Allah dans le temple.\n\nZakariyy√¢ son gardien trouvait toujours une nourriture miraculeuse chez elle. L'ange Jibr√Æl lui annon√ßa qu'elle aurait un enfant sans p√®re ‚Äî Issa. Elle l'enfanta seule sous un palmier.\n\nüìø Le√ßon : La puret√©, la d√©votion et la confiance absolue en Allah font de Maryam le mod√®le de la femme croyante.`},
            {name:"√és√¢ Ô∑∫",sub:"R√ªh Allah ‚Äî n√© sans p√®re",emoji:"‚ú®",story:`Issa est n√© miraculeusement de Maryam vierge. D√®s le berceau, il parla pour d√©fendre sa m√®re : "Je suis le serviteur d'Allah ; Il m'a donn√© le Livre et m'a fait proph√®te."\n\nIl gu√©rissait les malades, ressuscitait les morts, cr√©ait des oiseaux d'argile qui s'envolaient ‚Äî tout par la permission d'Allah. Il redescendra √† la fin des temps.\n\nüìø Le√ßon : Issa est un serviteur d'Allah, pas Dieu. Sa naissance miraculeuse n'est pas plus √©trange que celle d'Adam.`},
            {name:"Muhammad Ô∑∫",sub:"Le sceau des proph√®tes",emoji:"üåô",story:`Muhammad Ô∑∫ est n√© √† La Mecque en 570, l'Ann√©e de l'√âl√©phant. Orphelin t√¥t, il fut connu sous le nom d'"Al-Am√Æn" (le fid√®le). √Ä 40 ans, dans la grotte de Hir√¢, l'ange Jibr√Æl lui dit "Lis !"\n\nLa mission dura 23 ans. En 630, La Mecque fut conquise sans effusion de sang. Le Proph√®te Ô∑∫ pardonna √† ses pires ennemis.\n\nüìø Le√ßon : "Il y a dans l'Envoy√© d'Allah un excellent mod√®le pour vous." (33:21) √âtudier sa vie, c'est apprendre √† vivre.`},
        ];

        // ============ ALLAH 99 NAMES ============
        const ALLAH_NAMES = [
            {n:"All√¢h",a:"ÿßŸÑŸÑŸá",t:"Le nom supr√™me",d:"Le nom propre d'Allah, celui que rien ni personne ne peut porter. Contient tous les attributs divins."},
            {n:"Ar-Rahm√¢n",a:"ÿßŸÑÿ±ÿ≠ŸÖŸÜ",t:"Le Tout-Mis√©ricordieux",d:"Sa mis√©ricorde englobe toute cr√©ature. Il est doux m√™me avec les ingrats."},
            {n:"Ar-Rah√Æm",a:"ÿßŸÑÿ±ÿ≠ŸäŸÖ",t:"Le Tr√®s-Mis√©ricordieux",d:"Sa mis√©ricorde sp√©ciale est pour les croyants au Jour Dernier. Il ne d√©√ßoit jamais celui qui revient vers Lui."},
            {n:"Al-Malik",a:"ÿßŸÑŸÖŸÑŸÉ",t:"Le Roi souverain",d:"Tout le pouvoir Lui appartient. Aucun roi ne peut rivaliser avec Sa Royaut√© absolue."},
            {n:"Al-Qudd√ªs",a:"ÿßŸÑŸÇÿØŸàÿ≥",t:"Le Saint",d:"Absolument pur de tout d√©faut. Quand tu te sens impur, reviens vers Lui qui est la Puret√© m√™me."},
            {n:"As-Sal√¢m",a:"ÿßŸÑÿ≥ŸÑÿßŸÖ",t:"La Paix",d:"Il est la source de toute paix. 'As-sal√¢mu alaykum' rappelle qu'Allah est As-Sal√¢m."},
            {n:"Al-Mu'min",a:"ÿßŸÑŸÖÿ§ŸÖŸÜ",t:"Le Garant",d:"Il s√©curise Ses servants contre toute injustice."},
            {n:"Al-'Az√Æz",a:"ÿßŸÑÿπÿ≤Ÿäÿ≤",t:"Le Tout-Puissant",d:"Sa puissance est in√©galable. En Lui seul trouve-t-on la vraie force."},
            {n:"Al-Jabb√¢r",a:"ÿßŸÑÿ¨ÿ®ÿßÿ±",t:"Le R√©parateur",d:"Il r√©pare les c≈ìurs bris√©s. Viens √† Lui avec tes fractures ‚Äî Il est le seul √† pouvoir les souder."},
            {n:"Al-Kh√¢liq",a:"ÿßŸÑÿÆÿßŸÑŸÇ",t:"Le Cr√©ateur",d:"Il cr√©e de rien. Chaque fois que tu observes la nature, tu vois Son ≈ìuvre."},
            {n:"Al-Ghaff√¢r",a:"ÿßŸÑÿ∫ŸÅÿßÿ±",t:"Le Grand Pardonneur",d:"Il pardonne encore et encore, sans limite. Ne d√©sesp√®re jamais de Sa mis√©ricorde."},
            {n:"Al-Wahh√¢b",a:"ÿßŸÑŸàŸáÿßÿ®",t:"Le Tout-Donateur",d:"Il donne sans qu'on Lui demande, sans condition. Chaque respiration est un cadeau."},
            {n:"Ar-Razz√¢q",a:"ÿßŸÑÿ±ÿ≤ÿßŸÇ",t:"Le Pourvoyeur",d:"Il assure la subsistance de chaque cr√©ature. Fais confiance ‚Äî Il pourvoira."},
            {n:"Al-Fatt√¢h",a:"ÿßŸÑŸÅÿ™ÿßÿ≠",t:"L'Ouvreur des portes",d:"Quand toutes les portes semblent ferm√©es, Il peut en ouvrir une que tu n'imaginais pas."},
            {n:"Al-'Al√Æm",a:"ÿßŸÑÿπŸÑŸäŸÖ",t:"L'Omniscient",d:"Il sait tout ‚Äî tes pens√©es secr√®tes, tes douleurs cach√©es. Rien n'est trop petit pour Son attention."},
            {n:"Al-B√¢sit",a:"ÿßŸÑÿ®ÿßÿ≥ÿ∑",t:"Celui qui √©tend",d:"Il √©largit les provisions quand Il veut. Apr√®s la contraction vient l'expansion."},
            {n:"Ar-R√¢fi'",a:"ÿßŸÑÿ±ÿßŸÅÿπ",t:"Celui qui √©l√®ve",d:"Il √©l√®ve qui Il veut en dignit√©, en rang, en foi. Seul Lui peut te hisser vraiment."},
            {n:"As-Sam√Æ'",a:"ÿßŸÑÿ≥ŸÖŸäÿπ",t:"L'Audient",d:"Il entend chaque dua murmur√© dans la nuit. Tu n'as jamais besoin de crier pour √™tre entendu."},
            {n:"Al-Bas√Ær",a:"ÿßŸÑÿ®ÿµŸäÿ±",t:"Le Clairvoyant",d:"Il voit tout, y compris ce que tu caches."},
            {n:"Al-'Adl",a:"ÿßŸÑÿπÿØŸÑ",t:"Le Juste",d:"Sa justice est absolue. Tout ce qui arrive a une sagesse, m√™me si tu ne la vois pas."},
            {n:"Al-Lat√Æf",a:"ÿßŸÑŸÑÿ∑ŸäŸÅ",t:"Le Subtil",d:"Il agit de fa√ßon d√©licate, imperceptible. Il t'a guid√© bien des fois sans que tu t'en rendes compte."},
            {n:"Al-Hal√Æm",a:"ÿßŸÑÿ≠ŸÑŸäŸÖ",t:"Le Cl√©ment",d:"Il ne se pr√©cipite pas dans la punition. Sa cl√©mence est un espace pour le repentir."},
            {n:"Al-Ghaf√ªr",a:"ÿßŸÑÿ∫ŸÅŸàÿ±",t:"Le Pardonneur",d:"Il pardonne immens√©ment. Parmi Ses noms les plus r√©currents dans le Coran ‚Äî c'est un message pour nous."},
            {n:"Ash-Shak√ªr",a:"ÿßŸÑÿ¥ŸÉŸàÿ±",t:"Le Tr√®s-Reconnaissant",d:"Il r√©compense m√™me le petit effort au-del√† de ce qu'on m√©rite."},
            {n:"Al-Haf√Æz",a:"ÿßŸÑÿ≠ŸÅŸäÿ∏",t:"Le Gardien",d:"Il te prot√®ge, toi et ceux que tu aimes, m√™me quand tu dors."},
            {n:"Al-Kar√Æm",a:"ÿßŸÑŸÉÿ±ŸäŸÖ",t:"Le Tout-G√©n√©reux",d:"Sa g√©n√©rosit√© est sans fond. Demande-Lui ‚Äî Il n'est jamais avare."},
            {n:"Al-Muj√Æb",a:"ÿßŸÑŸÖÿ¨Ÿäÿ®",t:"Celui qui exauce",d:"Il r√©pond √† chaque invocation. Parfois imm√©diatement, parfois diff√©r√© ‚Äî mais Il r√©pond toujours."},
            {n:"Al-Wad√ªd",a:"ÿßŸÑŸàÿØŸàÿØ",t:"L'Affectueux",d:"Il est le seul √† t'aimer inconditionnellement, parfaitement et pour toujours."},
            {n:"Al-Haqq",a:"ÿßŸÑÿ≠ŸÇ",t:"Le Vrai",d:"Il est la seule r√©alit√© absolue. Tout le reste est √©ph√©m√®re."},
            {n:"Al-Wak√Æl",a:"ÿßŸÑŸàŸÉŸäŸÑ",t:"Le G√©rant",d:"'Hasbunallah wa ni'mal wak√Æl' ‚Äî Allah nous suffit ! Confie-Lui tes affaires."},
            {n:"Al-Waliyy",a:"ÿßŸÑŸàŸÑŸä",t:"Le Protecteur alli√©",d:"Il est le protecteur des croyants. 'Allah est le protecteur de ceux qui croient.' (2:257)"},
            {n:"Al-Ham√Æd",a:"ÿßŸÑÿ≠ŸÖŸäÿØ",t:"Le Digne de Louange",d:"Toute louange Lui revient. 'Al-Hamdu lillah' ‚Äî la louange appartient √† Allah."},
            {n:"Al-Muhy√Æ",a:"ÿßŸÑŸÖÿ≠ŸäŸä",t:"Celui qui fait vivre",d:"Il peut vivifier un c≈ìur mort, une foi morte. La renaissance est toujours possible."},
            {n:"Al-Hayy",a:"ÿßŸÑÿ≠Ÿä",t:"Le Vivant",d:"Il vit d'une vie parfaite et √©ternelle. Ayat al-Kurs√Æ : 'Al-Hayy Al-Qayy√ªm'"},
            {n:"Al-Qayy√ªm",a:"ÿßŸÑŸÇŸäŸàŸÖ",t:"Le Subsistant",d:"Il se suffit √† Lui-m√™me et tout d√©pend de Lui. Sans Lui, rien ne subsisterait un seul instant."},
            {n:"Al-W√¢hid",a:"ÿßŸÑŸàÿßÿ≠ÿØ",t:"L'Unique",d:"Il est Un sans associ√©, sans semblable. Tout part de l√†."},
            {n:"Al-Ahad",a:"ÿßŸÑÿ£ÿ≠ÿØ",t:"L'Un",d:"Absolument Un, indivisible, incomparable. La base de tout le tawhid."},
            {n:"As-Samad",a:"ÿßŸÑÿµŸÖÿØ",t:"Le Soutien universel",d:"Tout le monde a besoin de Lui. Lui n'a besoin de personne."},
            {n:"Al-Q√¢dir",a:"ÿßŸÑŸÇÿßÿØÿ±",t:"Le Puissant",d:"Il peut tout faire. Aucune demande n'est trop grande pour Lui."},
            {n:"Al-Awwal",a:"ÿßŸÑÿ£ŸàŸÑ",t:"Le Premier",d:"Il est avant toute chose. Il n'y avait rien avant Lui."},
            {n:"Al-√Çkhir",a:"ÿßŸÑÿ¢ÿÆÿ±",t:"Le Dernier",d:"Il demeure apr√®s toute chose. Quand tout dispara√Æt, Il reste."},
            {n:"Al-B√¢tin",a:"ÿßŸÑÿ®ÿßÿ∑ŸÜ",t:"Le Cach√©",d:"Son Essence est inaccessible. On Le conna√Æt par Ses noms et attributs."},
            {n:"Al-Barr",a:"ÿßŸÑÿ®ÿ±",t:"Le Bienfaisant",d:"Il est plein de bont√© envers Ses cr√©atures. M√™me les non-croyants b√©n√©ficient de Sa bont√©."},
            {n:"At-Taww√¢b",a:"ÿßŸÑÿ™Ÿàÿßÿ®",t:"L'Accueillant au repentir",d:"Il accepte le repentir encore et encore. Chaque retour vers Lui est une nouvelle naissance."},
            {n:"Al-'Afuww",a:"ÿßŸÑÿπŸÅŸà",t:"L'Indulgent",d:"Il efface les fautes sans m√™me les rappeler. 'All√¢humma innaka 'afuwwun...'"},
            {n:"Ar-Ra'√ªf",a:"ÿßŸÑÿ±ÿ§ŸàŸÅ",t:"Le Bienveillant",d:"Sa bienveillance est une tendresse douce et attentive. Comme une m√®re mais en infiniment plus."},
            {n:"An-N√ªr",a:"ÿßŸÑŸÜŸàÿ±",t:"La Lumi√®re",d:"Il est la Lumi√®re des cieux et de la terre. Demande-Lui la lumi√®re du c≈ìur."},
            {n:"Al-H√¢d√Æ",a:"ÿßŸÑŸáÿßÿØŸä",t:"Le Guide",d:"Il guide qui Il veut. Demande-Lui la guidance chaque jour."},
            {n:"Al-B√¢q√Æ",a:"ÿßŸÑÿ®ÿßŸÇŸä",t:"Le Permanent",d:"Il dure √©ternellement. Tout ce que tu aimes passera ‚Äî Lui seul demeure."},
            {n:"As-Sab√ªr",a:"ÿßŸÑÿµÿ®Ÿàÿ±",t:"Le Patient",d:"Il ne Se pr√©cipite pas dans la punition. Sa patience est un espace pour ton repentir."},
        ];

        // ============ ARABIC LETTERS ============
        const ARABIC_LETTERS = [
            {l:"ÿß",n:"Alif",s:"√¢ / a",ex:"ÿ£ŸéŸÑŸéŸÖ (Alam)"},
            {l:"ÿ®",n:"B√¢",s:"b",ex:"ÿ®ŸéŸäÿ™ (Maison)"},
            {l:"ÿ™",n:"T√¢",s:"t",ex:"ÿ™ŸéŸàÿ®ÿ© (Repentir)"},
            {l:"ÿ´",n:"Th√¢",s:"th",ex:"ÿ´ŸéŸàÿßÿ® (R√©compense)"},
            {l:"ÿ¨",n:"J√Æm",s:"dj",ex:"ÿ¨ŸéŸÜŸéŸëÿ© (Paradis)"},
            {l:"ÿ≠",n:"H√¢",s:"h aspir√©",ex:"ÿ≠ŸéŸÖÿØ (Louange)"},
            {l:"ÿÆ",n:"Kh√¢",s:"kh",ex:"ÿÆŸéŸäÿ± (Bien)"},
            {l:"ÿØ",n:"D√¢l",s:"d",ex:"ÿØŸèÿπÿßÿ° (Dua)"},
            {l:"ÿ∞",n:"Dh√¢l",s:"dh",ex:"ÿ∞ŸêŸÉÿ± (Dhikr)"},
            {l:"ÿ±",n:"R√¢",s:"r roul√©",ex:"ÿ±Ÿéÿ≠ŸÖÿ© (Mis√©ricorde)"},
            {l:"ÿ≤",n:"Z√¢y",s:"z",ex:"ÿ≤ŸéŸÉÿßÿ© (Zak√¢t)"},
            {l:"ÿ≥",n:"S√Æn",s:"s",ex:"ÿ≥ŸéŸÑÿßŸÖ (Paix)"},
            {l:"ÿ¥",n:"Sh√Æn",s:"ch",ex:"ÿ¥ŸèŸÉÿ± (Gratitude)"},
            {l:"ÿµ",n:"S√¢d",s:"s emphatique",ex:"ÿµŸéÿ®ÿ± (Patience)"},
            {l:"ÿ∂",n:"D√¢d",s:"d emphatique",ex:"ÿ∂ŸéŸàÿ° (Lumi√®re)"},
            {l:"ÿ∑",n:"T√¢ emp.",s:"t emphatique",ex:"ÿ∑ŸéŸáÿßÿ±ÿ© (Puret√©)"},
            {l:"ÿπ",n:"'Ayn",s:"' guttural",ex:"ÿπŸêŸÑŸÖ (Savoir)"},
            {l:"ÿ∫",n:"Ghayn",s:"gh",ex:"ÿ∫ŸéŸÅŸèŸàÿ± (Pardonneur)"},
            {l:"ŸÅ",n:"F√¢",s:"f",ex:"ŸÅŸéÿ¨ÿ± (Fajr)"},
            {l:"ŸÇ",n:"Q√¢f",s:"q guttural",ex:"ŸÇŸèÿ±ÿ¢ŸÜ (Coran)"},
            {l:"ŸÉ",n:"K√¢f",s:"k",ex:"ŸÉŸêÿ™ÿßÿ® (Livre)"},
            {l:"ŸÑ",n:"L√¢m",s:"l",ex:"ŸÑŸéŸäŸÑ (Nuit)"},
            {l:"ŸÖ",n:"M√Æm",s:"m",ex:"ŸÖŸéÿ≥ÿ¨ÿØ (Mosqu√©e)"},
            {l:"ŸÜ",n:"N√ªn",s:"n",ex:"ŸÜŸèŸàÿ± (Lumi√®re)"},
            {l:"Ÿá",n:"H√¢",s:"h doux",ex:"ŸáŸêÿØÿßŸäÿ© (Guidance)"},
            {l:"Ÿà",n:"W√¢w",s:"w / √ª",ex:"ŸàŸèÿ∂Ÿàÿ° (Wudu)"},
            {l:"Ÿä",n:"Y√¢",s:"y / √Æ",ex:"ŸäŸéŸÇŸäŸÜ (Certitude)"},
        ];

        window.SURAHS = SURAHS;
        window.PROPHETS = PROPHETS;
        window.ALLAH_NAMES = ALLAH_NAMES;
        window.ARABIC_LETTERS = ARABIC_LETTERS;

        // ============ SESSION STATE ============
        let sessionState = null;
        let timerInterval = null;
        let elapsedTime = 0;
        let activeLetterIdx = 0;
        let activeProphetIdx = -1;
        let allahSearchFilter = '';

        // ============ SPEAK ============
        function speakArabic(text) {
            if (!('speechSynthesis' in window)) { showToast('Audio non disponible sur cet appareil'); return; }
            window.speechSynthesis.cancel();
            const utt = new SpeechSynthesisUtterance(text);
            utt.lang = 'ar-SA';
            utt.rate = 0.75;
            // Try to find Arabic voice, retry after delay if voices not loaded yet
            const trySpeak = () => {
                const voices = window.speechSynthesis.getVoices();
                const arabicVoice = voices.find(v => v.lang && v.lang.startsWith('ar'));
                if (arabicVoice) utt.voice = arabicVoice;
                window.speechSynthesis.speak(utt);
            };
            if (window.speechSynthesis.getVoices().length > 0) { trySpeak(); }
            else { window.speechSynthesis.onvoiceschanged = trySpeak; setTimeout(trySpeak, 800); }
        }
        window.speakArabic = speakArabic;

        // ============ TOAST ============
        function showToast(msg) {
            const t = document.createElement('div');
            t.className = 'toast-anim fixed top-6 left-1/2 -translate-x-1/2 bg-white text-rose-600 px-6 py-3 rounded-2xl text-xs font-bold z-[999] shadow-xl border border-rose-200';
            t.innerText = msg;
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 2500);
        }
        window.showToast = showToast;

        // ============ NAVIGATION ============
        const TABS = ['home','train','arabic','prophets','allah','foundations','duas'];
        window.showTab = (tab) => {
            TABS.forEach(t => {
                document.getElementById('tab-'+t)?.classList.add('hidden');
                document.getElementById('nav-'+t)?.classList.remove('active-nav');
            });
            document.getElementById('tab-'+tab)?.classList.remove('hidden');
            document.getElementById('nav-'+tab)?.classList.add('active-nav');
            window.scrollTo(0,0);
            if (tab === 'home') renderHome();
            if (tab === 'arabic') renderArabicTab();
            if (tab === 'prophets') renderProphets();
            if (tab === 'allah') renderAllahNames();
            if (tab === 'train') { document.getElementById('surah-selector').classList.remove('hidden'); document.getElementById('session-view').classList.add('hidden'); document.getElementById('result-view').classList.add('hidden'); }
        };

        // ============ HOME ============
        function renderHome() {
            const today = new Date().toISOString().split('T')[0];
            const todaySess = sessions.filter(s => new Date(s.ts).toISOString().split('T')[0] === today);
            document.getElementById('streak-val').innerText = userData.streak||0;
            document.getElementById('today-val').innerText = todaySess.length;
            document.getElementById('total-val').innerText = sessions.length;

            const levelLabels = ['','‚≠ê','‚≠ê‚≠ê','‚≠ê‚≠ê‚≠ê'];
            const barColors = ['','bg-rose-300','bg-amber-300','bg-purple-300'];
            document.getElementById('home-surahs').innerHTML = SURAHS.map(s => {
                const sc = (scores[s.id])||{attempts:0,easy:0};
                const pct = sc.attempts>0 ? Math.round((sc.easy/sc.attempts)*100) : 0;
                return `<button onclick="window.startSession('${s.id}')" class="card p-4 text-left active:scale-95 transition-all w-full">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="text-xl">${s.emoji}</span>
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between"><p class="font-bold text-sm truncate">${s.name}</p><span class="text-xs text-stone-400 ml-1">${s.verses.length}v</span></div>
                            <p class="text-xs text-stone-400">${levelLabels[s.level]}</p>
                        </div>
                    </div>
                    <div class="w-full bg-rose-50 rounded-full h-1.5"><div class="${barColors[s.level]} h-1.5 rounded-full" style="width:${pct}%"></div></div>
                    <p class="text-[10px] text-stone-400 mt-1">${sc.attempts>0?`${pct}% fluide ¬∑ ${sc.attempts} lecture${sc.attempts>1?'s':''}` : 'Pas encore pratiqu√©'}</p>
                </button>`;
            }).join('');
        }

        // ============ TRAINING ============
        window.startSession = (surahId) => {
            const surah = SURAHS.find(s=>s.id===surahId);
            if (!surah) return;
            sessionState = {surahId, verseIndex:0, startTime:Date.now(), ratings:[]};
            elapsedTime = 0;
            document.getElementById('sess-surah-name').innerText = surah.name;
            document.getElementById('sess-surah-ar').innerText = surah.nameAr;
            document.getElementById('sess-tip').innerText = 'üí° '+surah.tip;
            renderVerseInSession();
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(()=>{
                elapsedTime++;
                const m=Math.floor(elapsedTime/60).toString().padStart(2,'0');
                const s=(elapsedTime%60).toString().padStart(2,'0');
                document.getElementById('sess-timer').innerText=`${m}:${s}`;
            },1000);
            document.getElementById('surah-selector').classList.add('hidden');
            document.getElementById('session-view').classList.remove('hidden');
            window.scrollTo(0,0);
        };

        function renderVerseInSession() {
            if (!sessionState) return;
            const surah = SURAHS.find(s=>s.id===sessionState.surahId);
            const verse = surah.verses[sessionState.verseIndex];
            document.getElementById('sess-verse-num').innerText = `Verset ${verse.n}`;
            document.getElementById('sess-verse-ar').innerText = verse.ar;
            document.getElementById('sess-verse-tr').innerText = verse.tr;
            document.getElementById('sess-progress-txt').innerText = `${sessionState.verseIndex+1} / ${surah.verses.length}`;
            document.getElementById('sess-progress-bar').style.width = `${((sessionState.verseIndex+1)/surah.verses.length)*100}%`;
            document.querySelectorAll('.rating-btn').forEach(b=>b.classList.remove('sel'));
        }

        window.speakCurrentVerse = () => {
            if (!sessionState) return;
            const surah = SURAHS.find(s=>s.id===sessionState.surahId);
            speakArabic(surah.verses[sessionState.verseIndex].ar);
        };

        window.rateVerse = (rating) => {
            if (!sessionState) return;
            sessionState.ratings.push(rating);
            document.querySelectorAll('.rating-btn').forEach(b=>b.classList.remove('sel'));
            document.getElementById('rate-'+rating).classList.add('sel');
            setTimeout(()=>{
                const surah = SURAHS.find(s=>s.id===sessionState.surahId);
                if (sessionState.verseIndex < surah.verses.length-1) {
                    sessionState.verseIndex++;
                    renderVerseInSession();
                } else {
                    finishSession();
                }
            },400);
        };

        function finishSession() {
            clearInterval(timerInterval);
            const surah = SURAHS.find(s=>s.id===sessionState.surahId);
            const ratings = sessionState.ratings;
            if (!scores[sessionState.surahId]) scores[sessionState.surahId]={easy:0,medium:0,hard:0,attempts:0};
            const sc = scores[sessionState.surahId];
            sc.attempts++;
            ratings.forEach(r=>{ if(r==='easy')sc.easy++; else if(r==='medium')sc.medium++; else sc.hard++; });
            sessions.push({ts:Date.now(),surahId:sessionState.surahId,verseCount:surah.verses.length,duration:elapsedTime,ratings});
            const today=new Date().toISOString().split('T')[0];
            const yesterday=new Date(Date.now()-86400000).toISOString().split('T')[0];
            if(userData.lastSession===yesterday) userData.streak=(userData.streak||0)+1;
            else if(userData.lastSession!==today) userData.streak=1;
            userData.lastSession=today;
            saveMain();
            const easyCount=ratings.filter(r=>r==='easy').length;
            const hardCount=ratings.filter(r=>r==='hard').length;
            const pct=ratings.length>0?Math.round((easyCount/ratings.length)*100):0;
            document.getElementById('result-surah').innerText=surah.name+' ¬∑ '+surah.nameAr;
            document.getElementById('result-duration').innerText=`‚è± ${Math.floor(elapsedTime/60)}:${(elapsedTime%60).toString().padStart(2,'0')}`;
            document.getElementById('result-pct').innerText=pct+'%';
            document.getElementById('result-easy').innerText=easyCount;
            document.getElementById('result-hard').innerText=hardCount;
            let msg = pct>=80?'üå∏ Mashallah ! Tu lis vraiment bien !': pct>=50?'üí™ Bien ! Continue √† pratiquer les parties difficiles.':'üìö Reviens sur les versets difficiles. La r√©gularit√© fait tout.';
            document.getElementById('result-msg').innerText=msg;
            document.getElementById('session-view').classList.add('hidden');
            document.getElementById('result-view').classList.remove('hidden');
            sessionState=null;
        }

        window.backToSelector = () => {
            if(timerInterval){clearInterval(timerInterval);sessionState=null;}
            document.getElementById('session-view').classList.add('hidden');
            document.getElementById('result-view').classList.add('hidden');
            document.getElementById('surah-selector').classList.remove('hidden');
        };

        // ============ ARABIC TAB ============
        function renderArabicTab() {
            // Letters grid
            const grid = document.getElementById('letters-grid');
            if (grid && grid.children.length === 0) {
                grid.innerHTML = ARABIC_LETTERS.map((l,i) => `<button class="letter-btn${i===0?' active-letter':''}" onclick="window.showLetter(${i})">
                    <p class="amiri text-2xl text-rose-600">${l.l}</p>
                    <p class="text-[10px] text-stone-500 mt-1 font-semibold">${l.n}</p>
                </button>`).join('');
                showLetter(0);
            }
        }

        window.showLetter = (i) => {
            activeLetterIdx = i;
            const l = ARABIC_LETTERS[i];
            document.getElementById('letter-display').innerText = l.l;
            document.getElementById('letter-name').innerText = l.n;
            document.getElementById('letter-sound').innerText = 'Son : '+l.s;
            document.getElementById('letter-example').innerText = l.ex;
            document.querySelectorAll('.letter-btn').forEach((b,j) => b.classList.toggle('active-letter', j===i));
        };

        window.speakLetter = () => {
            speakArabic(ARABIC_LETTERS[activeLetterIdx].l);
        };

        // ============ PROPHETS ============
        function renderProphets() {
            const list = document.getElementById('prophets-grid');
            if (list && list.children.length === 0) {
                list.innerHTML = PROPHETS.map((p,i) => `<button onclick="window.showProphet(${i})" class="card p-4 text-left active:scale-95 transition-all">
                    <span class="text-2xl block mb-2">${p.emoji}</span>
                    <p class="font-bold text-sm">${p.name}</p>
                    <p class="text-[10px] text-stone-400 mt-0.5">${p.sub}</p>
                </button>`).join('');
            }
        }

        window.showProphet = (i) => {
            activeProphetIdx = i;
            const p = PROPHETS[i];
            document.getElementById('prophet-emoji').innerText = p.emoji;
            document.getElementById('prophet-name-big').innerText = p.name;
            document.getElementById('prophet-sub').innerText = p.sub;
            document.getElementById('prophet-story').innerText = p.story;
            document.getElementById('prophets-list-view').classList.add('hidden');
            document.getElementById('prophet-detail').classList.remove('hidden');
        };
        window.backToProphets = () => {
            document.getElementById('prophet-detail').classList.add('hidden');
            document.getElementById('prophets-list-view').classList.remove('hidden');
        };

        // ============ ALLAH NAMES ============
        function renderAllahNames() {
            const container = document.getElementById('allah-names-list');
            if (!container) return;
            const filter = allahSearchFilter.toLowerCase();
            const filtered = ALLAH_NAMES.filter(n => filter==='' || n.n.toLowerCase().includes(filter) || n.t.toLowerCase().includes(filter));
            container.innerHTML = filtered.map((n,i) => `<button onclick="window.showAllahName(${ALLAH_NAMES.indexOf(n)})" class="card p-4 text-left w-full active:scale-95 transition-all flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <span class="amiri text-2xl text-rose-500">${n.a}</span>
                    <div><p class="font-bold text-sm">${n.n}</p><p class="text-xs text-stone-400">${n.t}</p></div>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
            </button>`).join('');
            document.getElementById('allah-count').innerText = ALLAH_NAMES.length;
        }

        window.showAllahName = (i) => {
            const n = ALLAH_NAMES[i];
            document.getElementById('aname-ar').innerText = n.a;
            document.getElementById('aname-n').innerText = n.n;
            document.getElementById('aname-t').innerText = n.t;
            document.getElementById('aname-d').innerText = n.d;
            document.getElementById('aname-detail').classList.remove('hidden');
            document.getElementById('aname-detail').scrollIntoView({behavior:'smooth', block:'nearest'});
        };

        window.filterAllahNames = (val) => {
            allahSearchFilter = val;
            renderAllahNames();
        };

        // ============ DUAS ============
        window.renderDuas = () => {
            document.getElementById('personal-duas-list').innerHTML = personalDuas.length > 0
                ? personalDuas.slice().reverse().map((d,ri) => {
                    const i = personalDuas.length-1-ri;
                    return `<div class="card p-4">
                        <div class="flex justify-between mb-1">
                            <p class="font-bold text-sm text-rose-600">${d.title||'Ma dua'}</p>
                            <button onclick="window.deleteDua(${i})" class="text-stone-300 text-xs">‚úï</button>
                        </div>
                        <p class="text-sm text-stone-500 leading-relaxed">${d.text}</p>
                    </div>`;
                }).join('')
                : '<p class="text-stone-400 italic text-sm text-center py-6">Tes duas personnelles s\'afficheront ici ü§≤</p>';
        };

        window.addDua = async () => {
            const title = document.getElementById('dua-title-inp').value.trim();
            const text = document.getElementById('dua-text-inp').value.trim();
            if (!text) return;
            personalDuas.push({title, text, ts:Date.now()});
            document.getElementById('dua-title-inp').value='';
            document.getElementById('dua-text-inp').value='';
            saveDuas();
            window.renderDuas();
            showToast('Dua sauvegard√©e ü§≤');
        };

        window.deleteDua = async (i) => {
            personalDuas.splice(i,1);
            saveDuas();
            window.renderDuas();
        };

        // ============ INIT ============
        function initApp() {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.getVoices();
                window.speechSynthesis.onvoiceschanged = () => window.speechSynthesis.getVoices();
            }
            loadAll(); // localStorage = instantan√©, 0ms
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            renderHome();
        }

        window.onload = initApp;
    </script>
</head>
<body class="pb-nav">

<!-- LOADING -->
<div id="loading" class="fixed inset-0 z-[500] flex flex-col items-center justify-center gap-5" style="background:#FDF8F3">
    <div class="w-16 h-16 rounded-full flex items-center justify-center text-3xl" style="background:linear-gradient(135deg,#E8A4A4,#C47A7A);box-shadow:0 8px 24px rgba(196,122,122,0.3)">üå∏</div>
    <div>
        <p class="playfair text-2xl font-bold text-center" style="color:#3D2B2B">Salam Samia üåô</p>
        <p class="amiri text-xl text-center mt-1" style="color:#C47A7A">ÿ®ÿ≥ŸÖ ÿßŸÑŸÑŸá ÿßŸÑÿ±ÿ≠ŸÖŸÜ ÿßŸÑÿ±ÿ≠ŸäŸÖ</p>
    </div>
    <div class="flex gap-1.5 mt-2">
        <div class="w-2 h-2 rounded-full bg-rose-300 animate-bounce" style="animation-delay:0s"></div>
        <div class="w-2 h-2 rounded-full bg-rose-400 animate-bounce" style="animation-delay:0.15s"></div>
        <div class="w-2 h-2 rounded-full bg-rose-500 animate-bounce" style="animation-delay:0.3s"></div>
    </div>
</div>

<!-- APP -->
<div id="app" class="hidden">

<!-- ===================== HOME TAB ===================== -->
<div id="tab-home" class="px-4 pb-nav">
    <header class="pt-12 pb-5 flex justify-between items-start">
        <div>
            <p class="text-xs uppercase font-bold tracking-widest text-stone-400">Salam 'Alaykum</p>
            <h1 class="playfair text-3xl font-bold mt-1" style="color:#3D2B2B">Samia üå∏</h1>
            <p class="text-xs font-medium mt-0.5 text-rose-400">Entra√Æne ta lecture arabe</p>
        </div>
        <div class="w-14 h-14 rounded-2xl flex items-center justify-center text-2xl" style="background:linear-gradient(135deg,#E8A4A4,#C47A7A);box-shadow:0 4px 16px rgba(196,122,122,0.3)">üìñ</div>
    </header>

    <!-- Petites stats -->
    <div class="grid grid-cols-3 gap-3 mb-5">
        <div class="card p-4 text-center">
            <p class="text-xl font-black text-rose-500" id="streak-val">0</p>
            <p class="text-[9px] text-stone-400 uppercase font-bold tracking-widest mt-1">S√©rie üî•</p>
        </div>
        <div class="card p-4 text-center">
            <p class="text-xl font-black text-purple-400" id="today-val">0</p>
            <p class="text-[9px] text-stone-400 uppercase font-bold tracking-widest mt-1">Auj.</p>
        </div>
        <div class="card p-4 text-center">
            <p class="text-xl font-black text-amber-500" id="total-val">0</p>
            <p class="text-[9px] text-stone-400 uppercase font-bold tracking-widest mt-1">Total</p>
        </div>
    </div>

    <!-- Surahs -->
    <h2 class="text-xs font-black uppercase tracking-widest text-stone-400 mb-3">Sourates ‚Äî clique pour t'entra√Æner</h2>
    <div class="grid grid-cols-2 gap-3" id="home-surahs"></div>
</div>

<!-- ===================== TRAIN TAB ===================== -->
<div id="tab-train" class="hidden px-4 pb-nav">
    <!-- Selector -->
    <div id="surah-selector">
        <header class="pt-12 pb-5">
            <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">Entra√Æner üéØ</h1>
            <p class="text-stone-400 text-sm mt-1">Lis √† voix haute, note ta fluidit√©</p>
        </header>
        <div class="card-soft p-5 mb-5" style="border-color:#F0D8D8">
            <p class="text-xs font-black uppercase tracking-widest text-rose-500 mb-3">Comment √ßa marche</p>
            <div class="grid grid-cols-3 gap-2">
                <div class="bg-white rounded-2xl p-3 text-center border border-rose-100">
                    <p class="text-lg mb-1">üëÅÔ∏è</p><p class="text-xs font-bold text-emerald-600">Lis le verset</p>
                </div>
                <div class="bg-white rounded-2xl p-3 text-center border border-rose-100">
                    <p class="text-lg mb-1">üîä</p><p class="text-xs font-bold text-purple-500">√âcoute si besoin</p>
                </div>
                <div class="bg-white rounded-2xl p-3 text-center border border-rose-100">
                    <p class="text-lg mb-1">‚≠ê</p><p class="text-xs font-bold text-rose-500">Note ta fluidit√©</p>
                </div>
            </div>
        </div>
        <p class="text-xs font-black uppercase tracking-widest text-stone-400 mb-3">Choisir une sourate</p>
        <div class="grid grid-cols-2 gap-3">
            <script>document.write(window.SURAHS?.map((s,i)=>`<button onclick="window.startSession('${s.id}')" class="card p-4 text-left active:scale-95 transition-all"><span class="text-xl block mb-2">${s.emoji}</span><p class="font-bold text-sm">${s.name}</p><p class="text-xs text-stone-400">${s.verses?.length||'?'}v ¬∑ ${'‚≠ê'.repeat(s.level)}</p></button>`).join('')||'')</script>
        </div>
    </div>

    <!-- Session View -->
    <div id="session-view" class="hidden">
        <header class="pt-10 pb-4">
            <div class="flex justify-between items-center mb-3">
                <button onclick="window.backToSelector()" class="flex items-center gap-1.5 text-rose-500 font-bold text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
                    Arr√™ter
                </button>
                <span id="sess-timer" class="text-stone-400 text-sm font-mono font-bold">00:00</span>
            </div>
            <div class="flex items-baseline gap-3">
                <h2 class="playfair text-2xl font-bold" style="color:#3D2B2B" id="sess-surah-name">Fatiha</h2>
                <span class="amiri text-xl text-rose-400" id="sess-surah-ar">ÿßŸÑŸÅÿßÿ™ÿ≠ÿ©</span>
            </div>
            <div class="flex items-center justify-between mt-3">
                <p class="text-[10px] text-stone-400 font-bold" id="sess-progress-txt">1 / 7</p>
                <p class="text-[10px] text-stone-400 uppercase font-black tracking-widest">progression</p>
            </div>
            <div class="w-full bg-rose-100 rounded-full h-1.5 mt-1.5">
                <div id="sess-progress-bar" class="h-1.5 rounded-full transition-all" style="background:linear-gradient(90deg,#E8A4A4,#C47A7A);width:14%"></div>
            </div>
        </header>

        <!-- Tip -->
        <div class="rounded-2xl px-4 py-3 mb-4" style="background:#EDE7F6;border:1px solid #D1C4E9">
            <p class="text-xs text-purple-600 leading-relaxed" id="sess-tip"></p>
        </div>

        <!-- Verse -->
        <div class="card p-6 mb-4 fade-up">
            <p class="text-[10px] text-stone-400 uppercase font-black tracking-widest mb-4" id="sess-verse-num">Verset 1</p>
            <p class="amiri text-3xl text-right leading-loose mb-5" style="color:#3D2B2B;line-height:2.6rem" id="sess-verse-ar"></p>
            <div class="border-t pt-4" style="border-color:#F0E0D6">
                <p class="text-sm text-stone-500 italic leading-relaxed" id="sess-verse-tr"></p>
            </div>
        </div>

        <!-- Listen -->
        <button onclick="window.speakCurrentVerse()" class="w-full card p-3 flex items-center justify-center gap-2 text-stone-400 text-sm font-semibold mb-4 active:scale-95 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
            √âcouter la prononciation arabe üîä
        </button>

        <!-- Rating -->
        <p class="text-[10px] text-stone-400 uppercase font-black tracking-widest text-center mb-3">Comment tu as lu ce verset ?</p>
        <div class="grid grid-cols-3 gap-3 mb-6">
            <button id="rate-easy" onclick="window.rateVerse('easy')" class="rating-btn card p-4 text-center active:scale-95 transition-all">
                <p class="text-2xl mb-1">‚úÖ</p><p class="text-xs font-bold text-emerald-600">Fluide</p>
            </button>
            <button id="rate-medium" onclick="window.rateVerse('medium')" class="rating-btn card p-4 text-center active:scale-95 transition-all">
                <p class="text-2xl mb-1">üî∏</p><p class="text-xs font-bold text-amber-500">Correct</p>
            </button>
            <button id="rate-hard" onclick="window.rateVerse('hard')" class="rating-btn card p-4 text-center active:scale-95 transition-all">
                <p class="text-2xl mb-1">‚ùó</p><p class="text-xs font-bold text-rose-500">Difficile</p>
            </button>
        </div>
    </div>

    <!-- Result -->
    <div id="result-view" class="hidden fade-up">
        <header class="pt-10 pb-5">
            <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">Session termin√©e üéâ</h1>
        </header>
        <div class="rounded-2xl p-6 text-center mb-4" style="background:linear-gradient(135deg,#F9EEE8,#F0D8D8);border:1px solid #E8C4C4">
            <p class="amiri text-xl text-rose-600 mb-1" id="result-surah">Al-Fatiha</p>
            <p class="text-stone-400 text-xs" id="result-duration">‚è± 1:32</p>
            <p class="playfair text-6xl font-bold text-rose-500 my-4" id="result-pct">75%</p>
            <p class="text-xs text-stone-400 uppercase font-black tracking-widest">Fluidit√© globale</p>
        </div>
        <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="card p-4 text-center"><p class="text-2xl font-black text-emerald-500" id="result-easy">0</p><p class="text-[9px] text-stone-400 uppercase font-bold tracking-widest mt-1">Fluides</p></div>
            <div class="card p-4 text-center"><p class="text-2xl font-black text-rose-400" id="result-hard">0</p><p class="text-[9px] text-stone-400 uppercase font-bold tracking-widest mt-1">√Ä retravailler</p></div>
        </div>
        <div class="card p-4 mb-5"><p class="text-sm text-stone-500 leading-relaxed" id="result-msg"></p></div>
        <div class="grid grid-cols-2 gap-3">
            <button onclick="window.backToSelector()" class="card p-4 text-center text-stone-500 font-semibold text-sm active:scale-95 transition-all">Autre sourate</button>
            <button onclick="window.backToSelector()" class="rose-btn p-4 text-center text-sm active:scale-95 transition-all">üîÅ Rejouer</button>
        </div>
    </div>
</div>

<!-- ===================== ARABIC TAB ===================== -->
<div id="tab-arabic" class="hidden px-4 pb-nav">
    <header class="pt-12 pb-5">
        <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">Arabe üî§</h1>
        <p class="text-stone-400 text-sm mt-1">Lettres et voyelles</p>
    </header>

    <!-- Letter detail card -->
    <div class="card p-6 mb-4 text-center">
        <p class="amiri text-7xl text-rose-500 mb-3" id="letter-display">ÿß</p>
        <p class="playfair text-xl font-bold" style="color:#3D2B2B" id="letter-name">Alif</p>
        <p class="text-sm text-stone-400 mt-1" id="letter-sound">Son : √¢ / a</p>
        <p class="text-xs text-stone-400 mt-1" id="letter-example">ÿ£ŸéŸÑŸéŸÖ (Alam)</p>
        <button onclick="window.speakLetter()" class="mt-4 rose-btn px-6 py-2.5 text-sm inline-flex items-center gap-2 active:scale-95 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
            √âcouter
        </button>
    </div>

    <!-- Letters grid -->
    <p class="text-xs font-black uppercase tracking-widest text-stone-400 mb-3">Les 28 lettres</p>
    <div class="grid grid-cols-4 gap-2 mb-6" id="letters-grid"></div>

    <!-- Vowels -->
    <p class="text-xs font-black uppercase tracking-widest text-stone-400 mb-3">Les voyelles (Harakat)</p>
    <div class="grid grid-cols-2 gap-3">
        <div class="card p-4 text-center"><p class="amiri text-3xl text-purple-400">ÿ®Ÿé</p><p class="font-bold text-sm mt-1">Fatha</p><p class="text-xs text-stone-400">son "a" court</p></div>
        <div class="card p-4 text-center"><p class="amiri text-3xl text-purple-400">ÿ®Ÿê</p><p class="font-bold text-sm mt-1">Kasra</p><p class="text-xs text-stone-400">son "i" court</p></div>
        <div class="card p-4 text-center"><p class="amiri text-3xl text-purple-400">ÿ®Ÿè</p><p class="font-bold text-sm mt-1">Damma</p><p class="text-xs text-stone-400">son "ou" court</p></div>
        <div class="card p-4 text-center"><p class="amiri text-3xl text-purple-400">ÿ®Ÿí</p><p class="font-bold text-sm mt-1">Suk√ªn</p><p class="text-xs text-stone-400">pas de voyelle</p></div>
        <div class="card p-4 text-center"><p class="amiri text-3xl text-purple-400">ÿ®Ÿë</p><p class="font-bold text-sm mt-1">Shadda</p><p class="text-xs text-stone-400">lettre doubl√©e</p></div>
        <div class="card p-4 text-center"><p class="amiri text-3xl text-purple-400">ÿ®Ÿã</p><p class="font-bold text-sm mt-1">Tanw√Æn</p><p class="text-xs text-stone-400">terminaison -an/-in/-un</p></div>
    </div>
</div>

<!-- ===================== PROPHETS TAB ===================== -->
<div id="tab-prophets" class="hidden px-4 pb-nav">
    <div id="prophets-list-view">
        <header class="pt-12 pb-5">
            <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">Proph√®tes Ô∑∫</h1>
            <p class="text-stone-400 text-sm mt-1">Leurs histoires, leurs le√ßons</p>
        </header>
        <div class="grid grid-cols-2 gap-3" id="prophets-grid"></div>
    </div>
    <div id="prophet-detail" class="hidden pb-4">
        <button onclick="window.backToProphets()" class="flex items-center gap-2 text-rose-500 font-bold text-sm pt-10 mb-5">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
            Retour
        </button>
        <div class="card p-6 mb-4">
            <p class="text-5xl mb-3" id="prophet-emoji">üåø</p>
            <h2 class="playfair text-2xl font-bold" style="color:#3D2B2B" id="prophet-name-big">Adam</h2>
            <p class="text-rose-400 text-sm font-medium mt-1" id="prophet-sub"></p>
        </div>
        <div class="card p-6">
            <p class="text-stone-600 text-sm leading-relaxed whitespace-pre-wrap" id="prophet-story"></p>
        </div>
    </div>
</div>

<!-- ===================== ALLAH NAMES TAB ===================== -->
<div id="tab-allah" class="hidden px-4 pb-nav">
    <header class="pt-12 pb-5">
        <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">Noms d'Allah üåø</h1>
        <p class="text-stone-400 text-sm mt-1">Les 99 beaux noms ¬∑ <span id="allah-count">0</span> noms</p>
    </header>

    <!-- Search -->
    <input oninput="window.filterAllahNames(this.value)" placeholder="üîç Chercher un nom..." class="w-full rounded-2xl px-4 py-3 text-sm mb-4 outline-none border" style="background:white;border-color:#F0D8D8;color:#3D2B2B">

    <!-- Detail card -->
    <div id="aname-detail" class="hidden card p-5 mb-4" style="background:#FDF8F3;border-color:#E8C4C4">
        <p class="amiri text-4xl text-rose-500 text-center mb-2" id="aname-ar">ÿßŸÑÿ±ÿ≠ŸÖŸÜ</p>
        <p class="playfair text-xl font-bold text-center" style="color:#3D2B2B" id="aname-n">Ar-Rahm√¢n</p>
        <p class="text-sm text-stone-400 text-center italic mb-3" id="aname-t">Le Tout-Mis√©ricordieux</p>
        <p class="text-sm text-stone-500 leading-relaxed" id="aname-d"></p>
        <button onclick="document.getElementById('aname-detail').classList.add('hidden')" class="mt-3 w-full text-center text-stone-400 text-xs font-bold uppercase tracking-widest py-2">Fermer ‚úï</button>
    </div>

    <div class="space-y-2" id="allah-names-list"></div>
</div>

<!-- ===================== FOUNDATIONS TAB ===================== -->
<div id="tab-foundations" class="hidden px-4 pb-nav">
    <header class="pt-12 pb-5">
        <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">Fondements üïã</h1>
        <p class="text-stone-400 text-sm mt-1">Les bases de l'Islam</p>
    </header>

    <!-- Pilliers de l'Islam -->
    <h2 class="text-xs font-black uppercase tracking-widest text-rose-500 mb-3">Les 5 Piliers de l'Islam</h2>
    <div class="space-y-3 mb-6">
        <details class="card overflow-hidden group" open>
            <summary class="p-5 flex items-center gap-4 cursor-pointer list-none outline-none">
                <div class="w-10 h-10 rounded-2xl flex items-center justify-center font-black text-white flex-shrink-0 text-lg" style="background:linear-gradient(135deg,#E8A4A4,#C47A7A)">1</div>
                <div class="flex-1"><p class="font-bold text-base" style="color:#3D2B2B">La Shahada</p><p class="text-xs text-stone-400">La d√©claration de foi</p></div>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4 space-y-3" style="border-color:#F0E0D6">
                <div class="rounded-2xl p-4 text-center" style="background:#FDF8F3;border:1px solid #E8C4C4">
                    <p class="amiri text-2xl text-rose-500 leading-loose mb-2">ÿ£Ÿéÿ¥ŸíŸáŸéÿØŸè ÿ£ŸéŸÜŸí ŸÑŸéÿß ÿ•ŸêŸÑŸéŸ∞ŸáŸé ÿ•ŸêŸÑŸéŸëÿß ÿßŸÑŸÑŸáŸè ŸàŸéÿ£Ÿéÿ¥ŸíŸáŸéÿØŸè ÿ£ŸéŸÜŸéŸë ŸÖŸèÿ≠ŸéŸÖŸéŸëÿØŸãÿß ÿ±Ÿéÿ≥ŸèŸàŸÑŸè ÿßŸÑŸÑŸáŸê</p>
                    <p class="text-xs text-stone-400 italic">Ashhadu an l√¢ il√¢ha illall√¢h wa ashhadu anna Muhammadan Ras√ªlull√¢h</p>
                    <p class="text-sm font-medium text-stone-600 mt-2">"J'atteste qu'il n'y a de dieu qu'Allah, et j'atteste que Muhammad est Son Messager."</p>
                </div>
                <p class="text-sm text-stone-500 leading-relaxed">La Shahada est la porte d'entr√©e dans l'Islam. Ce n'est pas une simple phrase ‚Äî c'est un contrat de vie entre toi et Allah.</p>
            </div>
        </details>

        <details class="card overflow-hidden group">
            <summary class="p-5 flex items-center gap-4 cursor-pointer list-none outline-none">
                <div class="w-10 h-10 rounded-2xl flex items-center justify-center font-black text-white flex-shrink-0 text-lg" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">2</div>
                <div class="flex-1"><p class="font-bold text-base" style="color:#3D2B2B">La Sal√¢t ‚Äî Pri√®re</p><p class="text-xs text-stone-400">5 pri√®res par jour</p></div>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4" style="border-color:#F0E0D6">
                <p class="text-sm text-stone-500 leading-relaxed mb-3">La pri√®re est le lien direct entre toi et Allah. 5 fois par jour, tu te rappelles de Lui et Il Se rappelle de toi.</p>
                <div class="grid grid-cols-5 gap-2 text-center">
                    <div class="bg-rose-50 rounded-xl p-2"><p class="text-lg">üåÖ</p><p class="text-[10px] font-bold text-stone-500">Fajr</p></div>
                    <div class="bg-rose-50 rounded-xl p-2"><p class="text-lg">‚òÄÔ∏è</p><p class="text-[10px] font-bold text-stone-500">Dohr</p></div>
                    <div class="bg-rose-50 rounded-xl p-2"><p class="text-lg">üå§Ô∏è</p><p class="text-[10px] font-bold text-stone-500">Asr</p></div>
                    <div class="bg-rose-50 rounded-xl p-2"><p class="text-lg">üåÜ</p><p class="text-[10px] font-bold text-stone-500">Maghrib</p></div>
                    <div class="bg-rose-50 rounded-xl p-2"><p class="text-lg">üåô</p><p class="text-[10px] font-bold text-stone-500">Isha</p></div>
                </div>
                <p class="text-xs text-stone-400 mt-3 italic">"Certes, la Sal√¢t pr√©serve de la turpitude et du bl√¢mable." ‚Äî Coran 29:45</p>
            </div>
        </details>

        <details class="card overflow-hidden group">
            <summary class="p-5 flex items-center gap-4 cursor-pointer list-none outline-none">
                <div class="w-10 h-10 rounded-2xl flex items-center justify-center font-black text-white flex-shrink-0 text-lg" style="background:linear-gradient(135deg,#FBCFE8,#EC4899)">3</div>
                <div class="flex-1"><p class="font-bold text-base" style="color:#3D2B2B">La Zak√¢t ‚Äî Aum√¥ne</p><p class="text-xs text-stone-400">2,5% des √©conomies</p></div>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4" style="border-color:#F0E0D6">
                <p class="text-sm text-stone-500 leading-relaxed">La Zak√¢t purifie ta richesse et aide ceux dans le besoin. Elle rappelle que l'argent appartient √† Allah ‚Äî tu en es un d√©positaire temporaire.</p>
                <p class="text-xs text-stone-400 mt-2 italic">"Prends de leurs biens une aum√¥ne pour les purifier et les faire cro√Ætre." ‚Äî Coran 9:103</p>
            </div>
        </details>

        <details class="card overflow-hidden group">
            <summary class="p-5 flex items-center gap-4 cursor-pointer list-none outline-none">
                <div class="w-10 h-10 rounded-2xl flex items-center justify-center font-black text-white flex-shrink-0 text-lg" style="background:linear-gradient(135deg,#FDE68A,#F59E0B)">4</div>
                <div class="flex-1"><p class="font-bold text-base" style="color:#3D2B2B">Le Sawm ‚Äî Je√ªne</p><p class="text-xs text-stone-400">Ramadan ¬∑ purification</p></div>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4" style="border-color:#F0E0D6">
                <p class="text-sm text-stone-500 leading-relaxed">Le je√ªne du Ramadan est une √©cole de volont√©, d'empathie et de proximit√© avec Allah. Pas seulement s'abstenir de manger ‚Äî ma√Ætriser la langue, les pens√©es, les regards.</p>
                <p class="text-xs text-stone-400 mt-2 italic">"Le je√ªne est pour Moi et c'est Moi qui en accorde la r√©compense." ‚Äî Hadith Qudsi</p>
            </div>
        </details>

        <details class="card overflow-hidden group">
            <summary class="p-5 flex items-center gap-4 cursor-pointer list-none outline-none">
                <div class="w-10 h-10 rounded-2xl flex items-center justify-center font-black text-white flex-shrink-0 text-lg" style="background:linear-gradient(135deg,#6EE7B7,#059669)">5</div>
                <div class="flex-1"><p class="font-bold text-base" style="color:#3D2B2B">Le Hajj ‚Äî P√®lerinage</p><p class="text-xs text-stone-400">Une fois dans sa vie</p></div>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4" style="border-color:#F0E0D6">
                <p class="text-sm text-stone-500 leading-relaxed">Le Hajj est le plus grand rassemblement humain sur terre. Tous v√™tus de blanc, sans distinction de rang. Un rappel de l'√©galit√© devant Allah et de la mort.</p>
                <p class="text-xs text-stone-400 mt-2 italic">"Et proclame parmi les hommes l'obligation du Hajj." ‚Äî Coran 22:27</p>
            </div>
        </details>
    </div>

    <!-- Pilliers de la Foi -->
    <h2 class="text-xs font-black uppercase tracking-widest text-purple-500 mb-3">Les 6 Piliers de la Foi (Iman)</h2>
    <div class="space-y-2">
        <div class="card p-4 flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black flex-shrink-0" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">1</div>
            <div><p class="font-bold text-sm" style="color:#3D2B2B">Croire en Allah</p><p class="text-xs text-stone-400">L'Unique, sans associ√©, cr√©ateur de tout</p></div>
        </div>
        <div class="card p-4 flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black flex-shrink-0" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">2</div>
            <div><p class="font-bold text-sm" style="color:#3D2B2B">Croire aux Anges</p><p class="text-xs text-stone-400">Cr√©√©s de lumi√®re, ils ex√©cutent les ordres d'Allah</p></div>
        </div>
        <div class="card p-4 flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black flex-shrink-0" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">3</div>
            <div><p class="font-bold text-sm" style="color:#3D2B2B">Croire aux Livres r√©v√©l√©s</p><p class="text-xs text-stone-400">Torah, Psaumes, √âvangile, Coran</p></div>
        </div>
        <div class="card p-4 flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black flex-shrink-0" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">4</div>
            <div><p class="font-bold text-sm" style="color:#3D2B2B">Croire aux Proph√®tes</p><p class="text-xs text-stone-400">De Adam √† Muhammad Ô∑∫</p></div>
        </div>
        <div class="card p-4 flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black flex-shrink-0" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">5</div>
            <div><p class="font-bold text-sm" style="color:#3D2B2B">Croire au Jour Dernier</p><p class="text-xs text-stone-400">R√©surrection, jugement, paradis et enfer</p></div>
        </div>
        <div class="card p-4 flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl flex items-center justify-center text-white text-sm font-black flex-shrink-0" style="background:linear-gradient(135deg,#C5B3E8,#9C7FD4)">6</div>
            <div><p class="font-bold text-sm" style="color:#3D2B2B">Croire au Destin (Al-Qadar)</p><p class="text-xs text-stone-400">Allah a d√©cr√©t√© toute chose ‚Äî bonne comme difficile</p></div>
        </div>
    </div>
</div>

<!-- ===================== DUAS TAB ===================== -->
<div id="tab-duas" class="hidden px-4 pb-nav">
    <header class="pt-12 pb-5">
        <h1 class="playfair text-3xl font-bold" style="color:#3D2B2B">Duas ü§≤</h1>
        <p class="text-stone-400 text-sm mt-1">Invocations essentielles & tes duas perso</p>
    </header>

    <!-- Duas importantes -->
    <h2 class="text-xs font-black uppercase tracking-widest text-rose-500 mb-3">Duas fondamentales</h2>
    <div class="space-y-3 mb-6">
        <details class="card overflow-hidden group">
            <summary class="p-5 flex justify-between items-center cursor-pointer list-none outline-none">
                <p class="font-bold text-sm" style="color:#3D2B2B">üêã Dua de Y√ªnus</p>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4 space-y-3" style="border-color:#F0E0D6">
                <p class="amiri text-2xl text-right text-rose-500 leading-loose">ŸÑŸéŸëÿß ÿ•ŸêŸÑŸéŸ∞ŸáŸé ÿ•ŸêŸÑŸéŸëÿß ÿ£ŸéŸÜÿ™Ÿé ÿ≥Ÿèÿ®Ÿíÿ≠ŸéÿßŸÜŸéŸÉŸé ÿ•ŸêŸÜŸêŸëŸä ŸÉŸèŸÜÿ™Ÿè ŸÖŸêŸÜŸé ÿßŸÑÿ∏ŸéŸëÿßŸÑŸêŸÖŸêŸäŸÜŸé</p>
                <p class="text-xs text-stone-400 italic">L√¢ il√¢ha ill√¢ anta subh√¢naka inn√Æ kuntu min adh-dh√¢lim√Æn</p>
                <p class="text-sm font-medium text-stone-600">"Il n'y a de dieu que Toi, Gloire √† Toi, j'ai √©t√© parmi les injustes."</p>
                <p class="text-xs text-purple-500">Dans les moments de d√©tresse. R√©citer 40 fois.</p>
            </div>
        </details>
        <details class="card overflow-hidden group">
            <summary class="p-5 flex justify-between items-center cursor-pointer list-none outline-none">
                <p class="font-bold text-sm" style="color:#3D2B2B">‚ú® Dua Laylat al-Qadr</p>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4 space-y-3" style="border-color:#F0E0D6">
                <p class="amiri text-2xl text-right text-rose-500 leading-loose">ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ•ŸêŸÜŸéŸëŸÉŸé ÿπŸéŸÅŸèŸàŸåŸë ÿ™Ÿèÿ≠Ÿêÿ®ŸèŸë ÿßŸÑŸíÿπŸéŸÅŸíŸàŸé ŸÅŸéÿßÿπŸíŸÅŸè ÿπŸéŸÜŸêŸëŸä</p>
                <p class="text-xs text-stone-400 italic">All√¢humma innaka 'afuwwun tuhibb al-'afw fa'fu 'ann√Æ</p>
                <p class="text-sm font-medium text-stone-600">"√î Allah, Tu es l'Indulgent, Tu aimes l'indulgence, sois indulgent envers moi."</p>
                <p class="text-xs text-purple-500">Recommand√©e par le Proph√®te Ô∑∫ √† Aisha pour Laylat al-Qadr.</p>
            </div>
        </details>
        <details class="card overflow-hidden group">
            <summary class="p-5 flex justify-between items-center cursor-pointer list-none outline-none">
                <p class="font-bold text-sm" style="color:#3D2B2B">üåä Dua de l'anxi√©t√©</p>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4 space-y-3" style="border-color:#F0E0D6">
                <p class="amiri text-2xl text-right text-rose-500 leading-loose">ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ•ŸêŸÜŸêŸëŸä ÿ£ŸéÿπŸèŸàÿ∞Ÿè ÿ®ŸêŸÉŸé ŸÖŸêŸÜŸé ÿßŸÑŸíŸáŸéŸÖŸêŸë ŸàŸéÿßŸÑŸíÿ≠Ÿéÿ≤ŸéŸÜŸê</p>
                <p class="text-xs text-stone-400 italic">All√¢humma inn√Æ a'√ªdhu bika min al-hamm wal-hazan</p>
                <p class="text-sm font-medium text-stone-600">"√î Allah, je cherche refuge en Toi contre l'inqui√©tude et la tristesse."</p>
                <p class="text-xs text-purple-500">Quand le c≈ìur est lourd. R√©citer 7 fois.</p>
            </div>
        </details>
        <details class="card overflow-hidden group">
            <summary class="p-5 flex justify-between items-center cursor-pointer list-none outline-none">
                <p class="font-bold text-sm" style="color:#3D2B2B">üìö Pour le savoir utile</p>
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-stone-300 group-open:rotate-180 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </summary>
            <div class="px-5 pb-5 border-t pt-4 space-y-3" style="border-color:#F0E0D6">
                <p class="amiri text-2xl text-right text-rose-500 leading-loose">ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿßŸÜŸíŸÅŸéÿπŸíŸÜŸêŸä ÿ®ŸêŸÖŸéÿß ÿπŸéŸÑŸéŸëŸÖŸíÿ™ŸéŸÜŸêŸä ŸàŸéÿπŸéŸÑŸêŸëŸÖŸíŸÜŸêŸä ŸÖŸéÿß ŸäŸéŸÜŸíŸÅŸéÿπŸèŸÜŸêŸä</p>
                <p class="text-xs text-stone-400 italic">All√¢humma anfa'n√Æ bim√¢ 'allamtan√Æ wa 'allimn√Æ m√¢ yanfa'un√Æ</p>
                <p class="text-sm font-medium text-stone-600">"√î Allah, fais-moi profiter de ce que Tu m'as enseign√©, et enseigne-moi ce qui m'est utile."</p>
                <p class="text-xs text-purple-500">Avant de lire le Coran ou de s'entra√Æner √† l'arabe.</p>
            </div>
        </details>
    </div>

    <!-- Duas personnelles -->
    <div class="card p-5 mb-4">
        <h2 class="text-xs font-black uppercase tracking-widest text-purple-500 mb-4">Mes duas personnelles üå∏</h2>
        <input id="dua-title-inp" placeholder="Titre (ex: Pour ma famille...)" class="w-full rounded-xl px-4 py-3 text-sm outline-none mb-2 border" style="background:#FDF8F3;border-color:#F0D8D8;color:#3D2B2B">
        <textarea id="dua-text-inp" rows="3" placeholder="Ta dua, dans tes mots..." class="w-full rounded-xl px-4 py-3 text-sm outline-none mb-3 resize-none border" style="background:#FDF8F3;border-color:#F0D8D8;color:#3D2B2B"></textarea>
        <button onclick="window.addDua()" class="rose-btn w-full py-3 text-sm active:scale-95 transition-all">Sauvegarder ma dua ü§≤</button>
    </div>
    <div id="personal-duas-list" class="space-y-3">
        <p class="text-stone-400 italic text-sm text-center py-6">Tes duas personnelles s'afficheront ici ü§≤</p>
    </div>
</div>

<!-- ===================== BOTTOM NAV ===================== -->
<nav class="fixed bottom-0 left-0 right-0 z-50 border-t overflow-x-auto no-scrollbar" style="background:rgba(253,248,243,0.95);border-color:#F0D8D8;backdrop-filter:blur(20px)">
    <div class="flex justify-between items-center py-2 px-1 min-w-max mx-auto" style="gap:4px">
        <button id="nav-home" onclick="window.showTab('home')" class="active-nav flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">Accueil</span>
        </button>
        <button id="nav-train" onclick="window.showTab('train')" class="flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">Fluidit√©</span>
        </button>
        <button id="nav-arabic" onclick="window.showTab('arabic')" class="flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">Arabe</span>
        </button>
        <button id="nav-prophets" onclick="window.showTab('prophets')" class="flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="5"></circle><path d="M20 21a8 8 0 0 0-16 0"></path></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">Proph√®tes</span>
        </button>
        <button id="nav-allah" onclick="window.showTab('allah')" class="flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"></path><path d="M12 8v4l3 3"></path></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">99 Noms</span>
        </button>
        <button id="nav-foundations" onclick="window.showTab('foundations')" class="flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">Bases</span>
        </button>
        <button id="nav-duas" onclick="window.showTab('duas')" class="flex flex-col items-center gap-0.5 px-3 py-1.5 min-w-[52px]">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon w-5 h-5 text-stone-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"></path><path d="m9 13 2 2 4-4"></path></svg>
            <span class="nav-label text-[9px] font-black text-stone-400 uppercase tracking-widest">Duas</span>
        </button>
    </div>
</nav>

</div>

<script>
// Fix: populate train surah selector after module loads
setTimeout(() => {
    const grid = document.querySelector('#surah-selector .grid');
    if (grid && window.SURAHS && grid.children.length <= 1) {
        grid.innerHTML = window.SURAHS.map(s =>
            `<button onclick="window.startSession('${s.id}')" class="card p-4 text-left active:scale-95 transition-all">
                <span class="text-xl block mb-2">${s.emoji}</span>
                <p class="font-bold text-sm" style="color:#3D2B2B">${s.name}</p>
                <p class="text-xs text-stone-400">${s.verses.length}v ¬∑ ${'‚≠ê'.repeat(s.level)}</p>
            </button>`
        ).join('');
    }
}, 1500);
</script>
</body>
</html>